(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0f599634"],{"0a20":function(t,a,i){},2591:function(t,a,i){"use strict";i.r(a);var e=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",[i("div",{staticClass:"thread_view"},[i("div",{staticClass:"row"},[t.topic_data?t._e():i("div",{staticClass:"col-9 pr-4 mpr-0",staticStyle:{"min-height":"500px"}},[i("div",{staticClass:"full-width"},[i("q-skeleton",{attrs:{height:"350px",square:""}})],1)]),t.topic_data?i("div",{staticClass:"col-9 pr-4 mpr-0"},[t.edit?i("view_edit",{attrs:{topic_data:t.topic_data}}):t._e(),i("div",{staticClass:"topic-detail card"},[i("div",{staticClass:"card-header media clearfix"},[i("div",{staticClass:"media-body"},[i("h1",{staticClass:"media-heading"},[t.forum_conf?i("router-link",{staticClass:"node",attrs:{to:"/forum/"+t.forum_conf.fid}},[t._v(" "+t._s(t.forum_conf.name)+" ")]):t._e(),i("span",{staticClass:"title"},[t.show_fanhao?i("span",{staticClass:"fanhao"},[t._v(t._s(t.show_fanhao))]):t._e(),t._v(" "+t._s(t.topic_data.title)+" ")])],1),i("div",{staticClass:"info"},[i("router-link",{staticClass:"user-name",attrs:{to:"/user/"+t.topic_data.user.uid}},[t._v(t._s(t.topic_data.user.username)+" ")]),i("span",{staticClass:"hidden-mobile"}),t._v(" · 发布于 "),i("abbr",{staticClass:"timeago"},[t._v(t._s(t.showDate(t.topic_data.release_time)))]),t.topic_data.updated_time&&t.topic_data.updated_time>t.topic_data.release_time?i("span",[t._v(" · 更新于 "),i("abbr",{staticClass:"timeago"},[t._v(t._s(t.showDate(t.topic_data.updated_time)))])]):t._e(),t._v(" · "+t._s(t.topic_data.view_count)+" 次阅读 ")],1)]),t.is_mobile()?t._e():i("div",{staticClass:"avatar media-right"},[i("router-link",{attrs:{title:"",to:"/user/"+t.topic_data.user.uid}},[i("img",{staticClass:"media-object avatar-48",attrs:{src:t.generate_avatar_url(t.topic_data.user)}})]),i("q-tooltip",[t._v(" "+t._s(t.topic_data.user.username)+" ")])],1)]),t.settoessence?i("div",{staticClass:"label-awesome"},[i("i",{staticClass:"fa fa-award awesome"}),t._v(" 本帖已被设为精华帖！ ")]):t._e(),i("div",{staticClass:"card-body  markdown-toc entry-content markdown ql-container ql-snowr"},[t._m(0),t.is_exist_video&&t.show_view_watch_limit?i("view_watch_limit",{attrs:{topic_data:t.topic_data}}):t._e(),t.is_exist_video&&!t.show_view_watch_limit?i("view_video",{staticClass:"mb-2",attrs:{embed:!0,topic_data:t.topic_data}}):t._e(),i("view_content",{attrs:{topic_data:t.topic_data}})],1),i("div",{staticClass:"card-footer clearfix"},[i("view_buy",{ref:"view_buy",staticClass:"mb-4",attrs:{topic_data:t.topic_data}}),i("view_tab",{ref:"view_tab",staticClass:"mb-4",attrs:{topic_data:t.topic_data}})],1)]),t.edit?t._e():i("div",{staticClass:"card",attrs:{id:"replies"}},[t._m(1),i("comment_list",{ref:"comment_list",attrs:{topic_data:t.topic_data}})],1),t.topic_data&&!t.edit?i("div",{staticClass:"card",attrs:{id:"reply"}},[i("comment_reply",{ref:"comment_reply",attrs:{topic_data:t.topic_data}})],1):t._e()],1):t._e(),i("div",{staticClass:"sidebar hidden-mobile col-3"},[i("div",{attrs:{id:"topic-sidebar","data-spy":"affix","data-offset-bottom":"65"}},[i("ads_box_list"),t._m(2)],1)])])])])},o=[function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"toc-container dropdown ",staticStyle:{display:"block"}},[i("button",{staticClass:"btn btn-default none",attrs:{"data-toggle":"dropdown"}},[i("i",{staticClass:"fa fa-list"}),t._v(" 目录 ")]),i("div",{staticClass:"toc-panel dropdown-menu dropdown-menu-right"},[i("div",{staticClass:"list-container"},[i("ul",{staticClass:"list"})])])])},function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"items card-body none"},[i("div",{staticClass:"reply reply-deleted",attrs:{"data-id":"362718",id:"reply1"}},[i("div",{attrs:{id:"reply-362718","data-floor":"1"}},[i("div",{staticClass:"deleted text-center"},[t._v("1楼 已删除")])])])])},function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"notify-updated"},[i("a",{staticClass:"update",attrs:{href:"#"}},[i("i",{staticClass:"fa fa-bell-o"}),t._v(" "),i("b",[t._v("有新回复！")]),t._v("点击这里立即载入")])])}],s=(i("7bc9"),i("077f")),n=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"opts pl-0 pr-0"},[i("a",{staticClass:"likeable deactive tooltipstered",class:{active:t.tabinfo.is_like},on:{click:t.on_tab_like}},[i("i",{staticClass:"fa fa-heart"}),t._v(" "),t.tabinfo.like_count>0?i("span",[t._v(t._s(t.tabinfo.like_count)+" 个赞")]):i("span",[t._v("赞")])]),t._m(0),i("a",{staticClass:"bookmark",class:{active:t.tabinfo.is_star},attrs:{title:"收藏"},on:{click:t.on_tab_star}},[i("i",{staticClass:"fa fa-bookmark"}),t._v(" "+t._s(t.tabinfo.is_star?"已收藏":"收藏")+" ")]),i("a",{staticClass:"bookmark",attrs:{title:t.langloader("report")},on:{click:t.on_tab_star}},[i("i",{staticClass:"fas fa-flag"}),t._v(" "+t._s(t.langloader("report"))+" ")]),t.$store.state.hasLogin&&t.$store.state.user.userinfo.uid==t.topic_data.user.uid||t.is_manager?i("span",{staticClass:"pull-right opts"},[t.is_manager?i("thread_manager",{attrs:{topic_data:t.topic_data}}):t._e(),i("router-link",{staticClass:"fa fa-edit",attrs:{title:"修改本帖",to:"/release/thread?edit_id="+t.topic_data.id}},[i("q-tooltip",[t._v(" 修改本帖 ")])],1),i("a",{staticClass:"fa fa-trash",attrs:{title:"删除本帖",rel:"nofollow"}},[i("q-tooltip",[t._v(" 删除本帖 ")])],1)],1):t._e()])},r=[function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("a",{staticClass:"follow none",attrs:{href:"#"}},[i("i",{staticClass:"fa fa-eye"}),t._v(" 关注")])}],c=i("59d9"),l=i("c286"),_={name:"tab",mixins:[s["a"],c["a"]],components:{thread_manager:l["a"]},data:function(){return{defalut_tabinfo:{is_like:!1,is_star:!1,like_count:0},like_active:void 0,star_active:void 0,tabinfo:Object.assign({},this.defalut_tabinfo)}},props:{topic_data:{}},computed:{is_manager:function(){try{return this.$store.state.user.userinfo.is_manager}catch(t){}return!1}},created:function(){var t=this;window._tab=this,this.$store.state.hasLogin&&this.get_tabinfo({id:this.topic_data.id,cb:this.on_load_tabinfo}),this.listener_loginout=this.$hub.on("event:loginout",(function(a){t.tabinfo=Object.assign({},t.defalut_tabinfo),console.log("event tab loginout",t.tabinfo," $store.state.hasLogin:",t.$store.state.hasLogin),t.$nextTick((function(){console.log("event tab loginout",t.tabinfo," $store.state.hasLogin:",t.$store.state.hasLogin),t.$forceUpdate()}))})),this.listener_login=this.$hub.on("event:login",(function(a){t.$store.state.hasLogin&&t.get_tabinfo({id:t.topic_data.id,cb:t.on_load_tabinfo})}))},methods:{on_load_tabinfo:function(t){this.tabinfo=t,this.$forceUpdate()},on_tab_like:function(){var t=this;if(!this.$store.state.hasLogin)return this.$app._userbar.show_login_dialog();var a={id:this.topic_data.id,action:!this.tabinfo.is_like};this.$axios.post("/app/topic/like",a).then((function(a){console.log("topic like:",a),t.tabinfo.is_like=!t.tabinfo.is_like,t.tabinfo.is_like?t.tabinfo.like_count+=1:t.tabinfo.like_count-=1})).catch((function(t){}))},on_tab_star:function(){var t=this;if(!this.$store.state.hasLogin)return this.$app._userbar.show_login_dialog();var a={id:this.topic_data.id,action:!this.tabinfo.is_star};this.$axios.post("/app/topic/star",a).then((function(a){console.log("topic star:",a),t.tabinfo.is_star=!t.tabinfo.is_star})).catch((function(t){}))}},updated:function(){this.$nextTick((function(){console.log("tab call tab updated")}))},destroyed:function(){this.listener_login.off(),this.listener_loginout.off()}},d=_,u=(i("8573"),i("2877")),p=i("fe09"),f=Object(u["a"])(d,n,r,!1,null,"0e19c18d",null),v=f.exports;f.options.components=Object.assign(Object.create(f.options.components||null),f.options.components||{},{QTooltip:p["K"]});var h=function(){var t=this,a=t.$createElement,i=t._self._c||a;return t.topic_data?i("div",{attrs:{id:"buy"}},[i("buy_theav",{attrs:{topic_data:t.topic_data}})],1):t._e()},b=[],m=function(){var t=this,a=t.$createElement,i=t._self._c||a;return t.topic_data.buy_theav&&Object.keys(t.topic_data.buy_theav).length>0?i("div",[t.$store.state.hasLogin?t._e():i("div",[i("div",{staticClass:"label-awesome"},[i("i",{staticClass:"fa fa-award awesome"}),t._v("尚未登录，注册用户方能下载 "),t.topic_data.buy_theav.price>0?i("span",{staticClass:"ml-1 mr-1 font-weight-bold buy_price none"},[t._v(t._s(t.topic_data.buy_theav.price))]):t._e(),i("v-btn",{staticClass:"mr-2",attrs:{color:"info",outlined:""},on:{click:function(a){return t.go("/user/login")}}},[t._v(" 登录 ")]),i("v-btn",{attrs:{color:"info",outlined:""},on:{click:function(a){return t.go("/user/register")}}},[t._v(" 注册 ")])],1)]),t.$store.state.hasLogin?i("div",[t.$store.state.user.userinfo.is_vip?i("v-alert",{attrs:{type:"success",border:"left","colored-border":"",color:"red accent-4",elevation:"2"}},[i("p",{staticClass:"mb-2"},[t._v(" VIP用户免费下载 ")]),i("p",[i("a",{staticClass:"file_name",attrs:{title:"下载链接点此",target:"_blank",href:"/download/video/"+t.topic_data.id}},[i("i",{staticClass:"fas fa-cloud-download-alt mr-2 mb-2"}),t._v("下载链接点此")])]),i("p",[t.torrent_url?i("a",{staticClass:"file_name",attrs:{title:"种子下载",target:"_blank",href:t.torrent_url}},[i("i",{staticClass:"fas fa-magnet mr-2"}),t._v("种子下载")]):t._e()])]):t._e(),t.buy_items.buy_theav?i("v-alert",{attrs:{type:"success",border:"left","colored-border":"",color:"red"}},[i("p",{staticClass:"mb-2"},[t._v(" 已购买此信息 ")]),i("p",[i("a",{staticClass:"file_name",attrs:{title:"下载链接点此",target:"_blank",href:"/download/video/"+t.topic_data.id}},[i("i",{staticClass:"fas fa-cloud-download-alt mr-2 mb-2"}),t._v("下载链接点此")])]),i("p",[t.torrent_url?i("a",{staticClass:"file_name",attrs:{title:"种子下载",target:"_blank",href:t.torrent_url}},[i("i",{staticClass:"fas fa-magnet mr-2"}),t._v("种子下载")]):t._e()])]):t._e()],1):t._e(),t.$store.state.hasLogin&&t.topic_data.buy_theav.price>0&&!t.$store.state.user.userinfo.is_vip&&!t.buy_items.buy_theav?i("div",[i("q-dialog",{attrs:{position:"top"},model:{value:t.buy_confirm,callback:function(a){t.buy_confirm=a},expression:"buy_confirm"}},[i("q-card",[i("q-card-section",{staticClass:"row items-center"},[i("span",{staticClass:"q-ml-sm"},[i("v-icon",{attrs:{size:"small",color:"grey",dark:""}},[t._v("lock")]),t._v(" 开通VIP,享受高速免费下载。 ")],1)]),i("q-card-actions",{attrs:{align:"right"}},[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"取消",color:"primary"}}),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:t.$l("vip.open_vip"),color:"primary"},on:{click:function(a){return t.go("/buy/vip")}}})],1)],1)],1),i("q-dialog",{model:{value:t.buy_gold_or_vip_confirm,callback:function(a){t.buy_gold_or_vip_confirm=a},expression:"buy_gold_or_vip_confirm"}},[i("q-card",[i("q-card-section",{staticClass:"row items-center"},[i("span",{staticClass:"q-ml-sm"},[t._v(t._s(t.$l("thread.notengough_gold_look")))])]),i("q-card-actions",{attrs:{align:"right"}},[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:t.$l("vip.buy"),color:"primary"},on:{click:function(a){return t.go("/buy/vip")}}}),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:t.$l("vip.gold"),color:"primary"},on:{click:function(a){return t.go("/buy/gold")}}})],1)],1)],1),i("v-alert",{attrs:{border:"left","colored-border":"",color:"red accent-4",elevation:"2",id:"video-download"}},[i("p",{staticClass:"mb-2"},[t.torrent_url?i("a",{staticClass:"file_name",attrs:{title:"种子下载",target:"_blank",href:t.torrent_url},on:{click:t.download_torrent_event}},[i("i",{staticClass:"fas fa-magnet mr-2"}),t._v("种子下载")]):t._e()]),i("p",{staticClass:"mb-2 none"},[t._v(" 隐藏下载内容 .需要消耗"),i("span",{staticClass:"font-weight-bold text-primary"},[t._v(t._s(t.topic_data.buy_theav.price))]),t._v("金币 ")]),i("div",{staticClass:"underline mb-2"},[i("span",{staticClass:"file_name",on:{click:t.on_click_file}},[i("span",{staticClass:"font-weight-bold"},[t._v("[高速下载]")]),t._v(t._s(t.topic_data.title)+".mp4")])]),i("div",[t._v("升级成为VIP，享受高速下载。")])]),t.$store.state.hasLogin?i("div",{staticClass:"gold pr-4 pl-4 none"},[i("span",[t._v("金币:")]),i("span",[t._v(t._s(t.$store.state.user.userinfo.gold))]),i("span",{staticClass:"ml-3"},[i("router-link",{attrs:{to:"/buy/gold",target:"_blank"}},[t._v("购买金币")])],1),i("span",{staticClass:"ml-3"},[i("router-link",{attrs:{to:"/buy/vip",target:"_blank"}},[t._v("升级VIP,不限查看")])],1)]):t._e(),t.$store.state.hasLogin?i("div",{staticClass:"xxbtn cl pr-4 pl-4 "},[i("q-btn",{staticClass:"float-right",attrs:{padding:"0px",disable:t.buy_loading,loading:t.buy_loading,color:"theme-color","text-color":"theme-color",icon:"lock_open",label:t.$l("vip.open_vip")},on:{click:t.buy_event}},[t.not_engout_gold?i("q-tooltip",[t._v(" $l('vip.open_vip') ")]):t._e()],1),i("q-btn",{staticClass:"float-right none",attrs:{padding:"0px",disable:t.buy_loading,loading:t.buy_loading,color:"theme-color","text-color":"theme-color",icon:"lock_open",label:t.not_engout_gold?t.$l("thread.notengough_gold_look"):t.langloader("thread.look")},on:{click:t.buy_event}},[t.not_engout_gold?i("q-tooltip",[t._v(" "+t._s(t.not_engout_gold?t.$l("thread.notengough_gold_look"):t.langloader("thread.look"))+" ")]):t._e()],1)],1):t._e()],1):t._e()]):t._e()},g=[],y={name:"buy_theav",mixins:[c["a"]],props:{topic_data:{}},data:function(){return{buy_loading:!1,buy_disable:!0,buy_confirm:!1,buy_gold_or_vip_confirm:!1,buy_items:{}}},destroyed:function(){this.listener_loginout.off()},created:function(){var t=this;console.log("vip_degree:",this.vip_degree),this.listener_loginout=this.$hub.on("event:loginout",(function(a){t.$nextTick((function(){t.$forceUpdate()}))})),this.$store.state.hasLogin&&!this.$store.state.user.userinfo.is_vip&&this.load_buy_item()},computed:{vip_degree:function(){return this.this_vip_degree(this.$store.state.user.userinfo)},not_engout_gold:function(){try{return this.topic_data.buy_theav.price>this.$store.state.user.userinfo.gold}catch(t){}return!1},torrent_url:function(){var t=this.topic_data.mktorrent;if(t&&t.torrent_id)return"/download/torrent/"+this.topic_data.id;if(this.topic_data.video_info){var a=this.topic_data.video_info.mktorrents;if(a&&a.length>0)return"/download/torrent/"+this.topic_data.id}}},methods:{download_torrent_event:function(t){if(!this.$store.state.hasLogin)return t.preventDefault(),this.$app._userbar.show_login_dialog("下载功能只对注册用户开放，请先注册或者登录！")},load_buy_item:function(){var t=this,a={id:this.topic_data.id,item:"buy_theav",type:"topic"};this.$axios.get("/app/topic/buy/item",{params:a}).then((function(a){console.log("topci/buy/item:",a);var i=a.data.buy_item;i&&(t.buy_items.buy_theav=i,t.$forceUpdate())}))},on_buy_topic:function(){var t=this,a={vid:this.topic_data.id,item:"buy_theav",type:"topic"};this.$axios.post("/app/topic/buy",a).then((function(a){var i=a.data;console.log("on_buy_topic response_data:",i);var e=i.buy_content;e&&(t.buy_content=e);var o=i.buy_theav;o&&(t.buy_items.buy_theav=o),t.$message(t.$l("thread.buy_success")),console.log("this.buy_items:",t.buy_items),t.$forceUpdate()}))},buy_event:function(){if(!this.$store.state.hasLogin)return this.$app._userbar.show_login_dialog();this.not_engout_gold,this.buy_confirm=!0},on_click_file:function(){if(!this.$store.state.hasLogin)return this.$app._userbar.show_login_dialog();this.not_engout_gold,this.buy_confirm=!0}}},w=y,C=i("6544"),$=i.n(C),k=i("0798"),x=i("8336"),q=i("132d"),j=Object(u["a"])(w,m,g,!1,null,"779f4948",null),O=j.exports;j.options.components=Object.assign(Object.create(j.options.components||null),j.options.components||{},{QDialog:p["n"],QCard:p["h"],QCardSection:p["j"],QCardActions:p["i"],QBtn:p["f"],QTooltip:p["K"]}),j.options.directives=Object.assign(Object.create(j.options.directives||null),j.options.directives||{},{ClosePopup:p["a"]}),$()(j,{VAlert:k["a"],VBtn:x["a"],VIcon:q["a"]});var L={name:"buy",mixins:[c["a"]],components:{buy_theav:O},props:{topic_data:{}},data:function(){return{buy_loading:!1,buy_disable:!0,buy_confirm:!1,buy_gold_or_vip_confirm:!1,buy_items:{}}},destroyed:function(){this.listener_loginout.off()},created:function(){var t=this;console.log("vip_degree:",this.vip_degree),this.listener_loginout=this.$hub.on("event:loginout",(function(a){t.$nextTick((function(){t.$forceUpdate()}))})),this.$store.state.hasLogin&&!this.$store.state.user.userinfo.is_vip&&this.load_buy_item()},computed:{vip_degree:function(){return this.this_vip_degree(this.$store.state.user.userinfo)},not_engout_gold:function(){try{return this.topic_data.buy_theav.price>this.$store.state.user.userinfo.gold}catch(t){}return!1},torrent_url:function(){var t=this.topic_data.mktorrent;if(t&&t.torrent_id)return"/download/torrent/"+this.topic_data.id;if(this.topic_data.video_info){var a=this.topic_data.video_info.mktorrents;if(a&&a.length>0)return"/download/torrent/"+this.topic_data.id}}},methods:{download_torrent_event:function(t){if(!this.$store.state.hasLogin)return t.preventDefault(),this.$app._userbar.show_login_dialog("下载功能只对注册用户开放，请先注册或者登录！")},load_buy_item:function(){var t=this,a={id:this.topic_data.id,item:"buy_theav",type:"topic"};this.$axios.get("/app/topic/buy/item",{params:a}).then((function(a){console.log("topci/buy/item:",a);var i=a.data.buy_item;i&&(t.buy_items.buy_theav=i,t.$forceUpdate())}))},on_buy_topic:function(){var t=this,a={vid:this.topic_data.id,item:"buy_theav",type:"topic"};this.$axios.post("/app/topic/buy",a).then((function(a){var i=a.data;console.log("on_buy_topic response_data:",i);var e=i.buy_content;e&&(t.buy_content=e);var o=i.buy_theav;o&&(t.buy_items.buy_theav=o),t.$message(t.$l("thread.buy_success")),console.log("this.buy_items:",t.buy_items),t.$forceUpdate()}))},buy_event:function(){return this.$store.state.hasLogin?this.not_engout_gold?this.buy_gold_or_vip_confirm=!0:void(this.buy_confirm=!0):this.$app._userbar.show_login_dialog()},on_click_file:function(){return this.$store.state.hasLogin?this.not_engout_gold?this.buy_gold_or_vip_confirm=!0:void(this.buy_confirm=!0):this.$app._userbar.show_login_dialog()}}},S=L,Q=(i("bd30"),Object(u["a"])(S,h,b,!1,null,null,null)),N=Q.exports;Q.options.components=Object.assign(Object.create(Q.options.components||null),Q.options.components||{},{QColor:p["m"]});var V=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i(t.show_what,{tag:"component"})},E=[],U=(i("c975"),i("fb6a"),i("a026")),T={name:"view_content",props:{topic_data:{}},data:function(){return{show_what:"empty_view"}},created:function(){var t=this;console.log("create topic data"),this.$nextTick((function(){console.log("[content]this.topic_data:",t.topic_data);var a={topic_data:t.topic_data},i="";i=t.topic_data.content.indexOf("data-src")>=0?"<div class='ql-editor' v-lazy-container=\"{ selector: 'img' }\">"+t.topic_data.content+"</div>":"<div class='ql-editor' >"+t.topic_data.content+"</div>",console.log("template_string:",i),U["a"].component("view_content_component",{template:i,data:function(){return Object.assign(a,{photo_min_height:"260px"})},computed:{screen_shots_list:function(){for(var t=[],a=this.topic_data.video_info.online_videos[0],i=a.screenshots.list.slice(0,6),e=a.hash_id,o=0;o<i.length;++o){var s=this.geenrate_screenshot_url(a.space_name,e,i[o]);t.push(s)}return t},cover_image_url:function(){var t=this.topic_data.video_info.online_videos[0],a=t.hash_id;return this.generate_cover_url(t.space_name,a)}},methods:{on_image_error:function(){}}}),t.show_what="view_content_component"}))},methods:{},computed:{is_manager:function(){try{return this.$store.state.user.userinfo.is_manager}catch(t){}return!1}}},B=T,I=(i("d409"),Object(u["a"])(B,V,E,!1,null,null,null)),D=I.exports,P=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("v-alert",{staticClass:"edit",attrs:{text:"",color:"info"}},[i("h5",[t._v("处于待审核状态，未发布")]),t.buy_contents&&t.buy_contents.length>0?i("div",{staticClass:"mt-3   buy_contents"},[i("h6",[t._v(t._s(t.$l("thread.attach_content"))+":")]),t._l(t.buy_contents,(function(a,e){return i("v-row",{key:e},[i("v-col",[t._v(" * "),a.gold?i("span",[t._v("价格:"),i("span",{staticClass:"text-theme-color"},[t._v(t._s(a.gold)+"金币")])]):t._e(),i("span",{staticClass:"ml-2"},[t._v(t._s(a.content))]),a.upload_files&&a.upload_files.length>0?i("span",{staticClass:"ml-2 text-theme-color"},[t._v(" "+t._s(a.upload_files.length)+"个文件 ")]):t._e(),i("span",[i("v-btn",{staticClass:"ma-2",attrs:{tile:"",outlined:"",color:"success"},on:{click:function(i){return t.on_show_attach_content_dialog(a)}}},[i("v-icon",{attrs:{left:""}},[t._v("mdi-pencil")]),t._v(" 查看 ")],1)],1)])],1)}))],2):t._e(),t.is_manager?i("v-row",[i("div",{staticClass:"mt-3"},[i("v-btn",{attrs:{color:"white darken-1 mr-1 ml-1",text:""},on:{click:t.on_pass_verify}},[t._v("通过审核 ")]),i("v-btn",{attrs:{color:"white darken-1",text:""},on:{click:t.on_not_verify}},[t._v("不通过 ")])],1)]):t._e(),i("q-separator",{staticClass:"mt-4"}),t.topic_verify?i("div",{staticClass:"mt-3"},["pass_verify"==t.topic_verify.action?i("p",{staticClass:"mb-2"},[t._v("已设置: "),i("span",[t._v("通过审核")]),t.topic_verify.reward_gold?i("span",{staticClass:"ml-2"},[t._v("奖励金币:"+t._s(t.topic_verify.reward_gold))]):t._e()]):t._e(),"not_verify"==t.topic_verify.action?i("p",{staticClass:"mb-2"},[t._v(" 已设置: "),i("span",{staticClass:"font-weight-bold"},[t._v("未通过审核")]),i("span",{staticClass:"ml-2"},[t._v("原因:"),i("span",{staticClass:"font-weight-bold"},[t._v(t._s(t.topic_verify.reason))])])]):t._e(),i("p",[t._v("如果需要修改，请重新提交")])]):t._e(),i("q-dialog",{model:{value:t.not_verify_dialog,callback:function(a){t.not_verify_dialog=a},expression:"not_verify_dialog"}},[i("q-card",{staticStyle:{"min-width":"400px"}},[i("q-card-section",[i("div",{staticClass:"text-h6"},[t._v("不通过审核")])]),i("q-separator"),i("q-card-section",{staticClass:"scroll",staticStyle:{"max-height":"50vh"}},[i("q-input",{attrs:{label:"原因"},model:{value:t.not_verify.reason,callback:function(a){t.$set(t.not_verify,"reason",a)},expression:"not_verify.reason"}})],1),i("q-separator"),i("q-card-actions",{attrs:{align:"right"}},[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"取消",color:"primary"}}),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"确定",color:"primary"},on:{click:t.on_dialog_not_verify}})],1)],1)],1),i("q-dialog",{model:{value:t.pass_verify_dialog,callback:function(a){t.pass_verify_dialog=a},expression:"pass_verify_dialog"}},[i("q-card",{staticStyle:{"min-width":"400px"}},[i("q-card-section",[i("div",{staticClass:"text-h6"},[t._v("通过审核")])]),i("q-separator"),i("q-card-section",{staticClass:"scroll",staticStyle:{"max-height":"50vh"}},[i("q-input",{attrs:{label:"奖励金币",type:"number"},model:{value:t.pass_verify.reward_gold,callback:function(a){t.$set(t.pass_verify,"reward_gold",a)},expression:"pass_verify.reward_gold"}})],1),i("q-separator"),i("q-card-actions",{attrs:{align:"right"}},[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"取消",color:"primary"}}),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"确定",color:"primary"},on:{click:t.on_dialog_pass_verify}})],1)],1)],1)],1)},A=[],K={name:"edit",props:{topic_data:{}},data:function(){return{buy_contents:void 0,pass_verify_dialog:!1,not_verify_dialog:!1,not_verify:{reason:"",action_uid:this.$store.state.user.userinfo.uid},pass_verify:{action_uid:this.$store.state.user.userinfo.uid,reward_gold:0},topic_verify:void 0}},created:function(){this.buy_contents=this.topic_data.buy_contents,this.load_topic_verify()},methods:{on_not_verify:function(){this.not_verify_dialog=!0},on_pass_verify:function(){this.pass_verify_dialog=!0},on_dialog_pass_verify:function(){var t=this,a=Object.assign({},this.pass_verify);console.log("[on_dialog_pass_verify]:",a),a["topic_id"]=this.topic_data.id,a["action"]="pass_verify",this.$axios.post("/app/topic/verify",a).then((function(i){var e=i.data;console.log("on_buy_topic response_data:",e),t.set_topic_verify(a)}))},on_dialog_not_verify:function(){var t=this,a=Object.assign({},this.not_verify);console.log("[on_dialog_pass_verify]:",a),a["topic_id"]=this.topic_data.id,a["action"]="not_verify",this.$axios.post("/app/topic/verify",a).then((function(i){var e=i.data;console.log("on_buy_topic response_data:",e),t.set_topic_verify(a)}))},load_topic_verify:function(){var t=this;this.$axios.get("/app/topic/verify",{params:{topic_id:this.topic_data.id}}).then((function(a){var i=a.data;console.log("load_topic_verify topic_verify:",i),t.set_topic_verify(i)}))},set_topic_verify:function(t){if(t){this.topic_verify=t;var a=t.action;this[a];t}}},computed:{is_manager:function(){try{return this.$store.state.user.userinfo.is_manager}catch(t){}return!1}}},z=K,J=(i("8d00"),i("62ad")),M=i("0fd9"),R=Object(u["a"])(z,P,A,!1,null,"269ec3a2",null),W=R.exports;R.options.components=Object.assign(Object.create(R.options.components||null),R.options.components||{},{QSeparator:p["A"],QDialog:p["n"],QCard:p["h"],QCardSection:p["j"],QInput:p["r"],QCardActions:p["i"],QBtn:p["f"]}),R.options.directives=Object.assign(Object.create(R.options.directives||null),R.options.directives||{},{ClosePopup:p["a"]}),$()(R,{VAlert:k["a"],VBtn:x["a"],VCol:J["a"],VIcon:q["a"],VRow:M["a"]});var F=i("417f"),G=i("c96ad"),H=i("d5dc"),X=i("227a"),Y={name:"threadview",mixins:[s["a"]],components:{view_tab:v,view_buy:N,view_video:F["a"],view_content:D,view_edit:W,comment_reply:H["a"],comment_list:X["a"],view_watch_limit:G["a"]},data:function(){return{topic_data:void 0,forum_conf:void 0,edit:!1}},created:function(){var t=this,a=this.$route.params.id,i=this.getUrlVars();i.edit&&console.log("处于编辑的帖子"),this.get_topic({id:a,from_cache:this.from_cache(),edit:i.edit,cb:this.on_load_topic_data}),window._t=this,this.listener_loginout=this.$hub.on("event:loginout",(function(a){console.log("event:loginout",a),t.$forceUpdate()})),this.listener_login=this.$hub.on("event:login",(function(a){console.log("event:login",a),t.$forceUpdate()}))},methods:{on_load_topic_data:function(t,a){if(console.log("[on_load_topic_data]topic_data:",t," edit:",a),this.topic_data=t,this.set_title(t.title),this.forum_conf=this.get_forum(t.fid),this.save_topic_data(t),this.topic_data.video_info&&!this.show_view_watch_limit){var i=this.topic_data.video_info.online_videos[0],e=i.hash_id;this.$store.state.user_visit.push(e)}a&&(this.edit=a)}},destroyed:function(){this.listener_login.off(),this.listener_loginout.off()},computed:{is_exist_video:function(){return this.topic_data&&this.topic_data.video_info},show_view_watch_limit:function(){var t=this.$store.state.user_visit.get_look_list();return console.log("[show_view_watch_limit]:",t),!this.$store.state.hasLogin&&t.length>2||!(!(t&&t.length>=5)||this.$store.state.user.userinfo.is_vip)},show_fanhao:function(){try{if(this.topic_data.video_info&&2==this.topic_data.video_info.av_data_type)return this.topic_data.video_info.fanhao}catch(t){console.error(t)}},settoessence:function(){if(this.topic_data.manager_set)return this.topic_data.manager_set.settoessence}}},Z=Y,tt=Object(u["a"])(Z,e,o,!1,null,"5637202c",null);a["default"]=tt.exports;tt.options.components=Object.assign(Object.create(tt.options.components||null),tt.options.components||{},{QSkeleton:p["B"],QTooltip:p["K"]})},"30ab":function(t,a,i){},"62ad":function(t,a,i){"use strict";i("4160"),i("caad"),i("13d5"),i("45fc"),i("4ec9"),i("a9e3"),i("b64b"),i("d3b7"),i("ac1f"),i("3ca3"),i("5319"),i("2ca0"),i("159b"),i("ddb0");var e=i("ade3"),o=i("5530"),s=(i("4b85"),i("a026")),n=i("d9f7"),r=i("80d2"),c=["sm","md","lg","xl"],l=function(){return c.reduce((function(t,a){return t[a]={type:[Boolean,String,Number],default:!1},t}),{})}(),_=function(){return c.reduce((function(t,a){return t["offset"+Object(r["q"])(a)]={type:[String,Number],default:null},t}),{})}(),d=function(){return c.reduce((function(t,a){return t["order"+Object(r["q"])(a)]={type:[String,Number],default:null},t}),{})}(),u={col:Object.keys(l),offset:Object.keys(_),order:Object.keys(d)};function p(t,a,i){var e=t;if(null!=i&&!1!==i){if(a){var o=a.replace(t,"");e+="-".concat(o)}return"col"!==t||""!==i&&!0!==i?(e+="-".concat(i),e.toLowerCase()):e.toLowerCase()}}var f=new Map;a["a"]=s["a"].extend({name:"v-col",functional:!0,props:Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])({cols:{type:[Boolean,String,Number],default:!1}},l),{},{offset:{type:[String,Number],default:null}},_),{},{order:{type:[String,Number],default:null}},d),{},{alignSelf:{type:String,default:null,validator:function(t){return["auto","start","end","center","baseline","stretch"].includes(t)}},tag:{type:String,default:"div"}}),render:function(t,a){var i=a.props,o=a.data,s=a.children,r=(a.parent,"");for(var c in i)r+=String(i[c]);var l=f.get(r);return l||function(){var t,a;for(a in l=[],u)u[a].forEach((function(t){var e=i[t],o=p(a,t,e);o&&l.push(o)}));var o=l.some((function(t){return t.startsWith("col-")}));l.push((t={col:!o||!i.cols},Object(e["a"])(t,"col-".concat(i.cols),i.cols),Object(e["a"])(t,"offset-".concat(i.offset),i.offset),Object(e["a"])(t,"order-".concat(i.order),i.order),Object(e["a"])(t,"align-self-".concat(i.alignSelf),i.alignSelf),t)),f.set(r,l)}(),t(i.tag,Object(n["a"])(o,{class:l}),s)}})},"7bc9":function(t,a,i){},8573:function(t,a,i){"use strict";var e=i("30ab"),o=i.n(e);o.a},"8d00":function(t,a,i){"use strict";var e=i("0a20"),o=i.n(e);o.a},bd30:function(t,a,i){"use strict";var e=i("e36d"),o=i.n(e);o.a},d11d:function(t,a,i){},d409:function(t,a,i){"use strict";var e=i("d11d"),o=i.n(e);o.a},e36d:function(t,a,i){}}]);
//# sourceMappingURL=chunk-0f599634.1b3a0522.js.map