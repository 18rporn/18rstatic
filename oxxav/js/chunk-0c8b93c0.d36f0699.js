(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0c8b93c0"],{"1bc8":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.loaded_tabinfo?i("v-row",{staticClass:"video_tab"},[i("div",{staticClass:"opts full-width"},[i("a",{staticClass:"likeable deactive tooltipstered",class:{active:t.tabinfo.is_like},on:{click:t.on_video_like}},[i("v-icon",{attrs:{small:!0},on:{click:t.on_video_like}},[t._v("thumb_up")]),i("span",[t._v(t._s(t.tabinfo.is_like?"已赞":"点赞"))])],1),i("a",{staticClass:"likeable deactive tooltipstered",class:{active:t.tabinfo.is_dislike},on:{click:t.on_video_dislike}},[i("v-icon",{attrs:{small:!0},on:{click:t.on_video_like}},[t._v("thumb_down")]),i("span",[t._v(t._s(t.tabinfo.is_dislike?"已踩":"踩"))])],1),i("a",{staticClass:"follow none",attrs:{href:"#"}},[i("i",{staticClass:"fa fa-eye"}),t._v(" 关注")]),i("a",{staticClass:"bookmark",class:{active:t.tabinfo.is_star},attrs:{title:"收藏"},on:{click:t.on_video_star}},[i("v-icon",{attrs:{small:!0},on:{click:t.on_video_like}},[t._v("favorite")]),t._v(" "+t._s(t.tabinfo.is_star?"已收藏":"收藏")+" ")],1),i("a",{staticClass:"bookmark",attrs:{title:"反馈"}},[i("v-icon",{attrs:{small:!0},on:{click:t.on_video_like}},[t._v("favorite")]),t._v(" "+t._s(t.$l("view.report"))+" ")],1),i("video_download",{attrs:{topic_data:t.topic_data}}),t.$store.state.hasLogin&&t.$store.state.user.userinfo.uid==t.topic_data.user.uid||t.is_manager?i("span",{staticClass:"pull-right opts"},[t.is_manager?i("thread_manager",{attrs:{topic_data:t.topic_data}}):t._e(),i("router-link",{staticClass:"fa fa-edit",attrs:{title:"修改",to:"/release/thread?edit_id="+t.topic_data.id}},[i("q-tooltip",[t._v(" 修改 ")])],1),i("a",{staticClass:"fa fa-trash",attrs:{title:"删除",rel:"nofollow"}},[i("q-tooltip",[t._v(" 删除 ")])],1)],1):t._e()],1)]):t._e()},a=[],o=i("c286"),n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a",{on:{click:t.on_show_download}},[i("i",{staticClass:"fas fa-cloud-download-alt"}),t._v(" "+t._s(t.$l("view.download"))+" "),i("q-menu",[i("q-list",{staticStyle:{"min-width":"100px"}},[i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""}},[i("q-item-section",{on:{click:t.on_direct_download}},[i("i",{staticClass:"fas fa-cloud-download-alt"},[t._v(t._s(t.$l("view.direct_download"))+"(VIP)")])])],1),i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""}},[i("q-item-section",{on:{click:t.on_torrent_download}},[i("i",{staticClass:"fas fa-magnet"},[t._v(t._s(t.$l("view.bt_download")))])])],1)],1)],1)],1)},r=[],c={name:"video_download",props:{topic_data:void 0},created:function(){},methods:{on_show_download:function(){},on_direct_download:function(){var t=this;return this.$store.state.hasLogin?this.$store.state.user.userinfo.is_vip?void this.$router.push("/download/video/"+this.topic_data.id):this.$q.dialog({title:this.$l("title_board_message"),message:this.$l("vip.download_tip"),cancel:this.$l("cancel"),ok:this.$l("vip.buy"),persistent:!0}).onOk((function(e){t.$router.push("/buy/vip")})):this.$app._userbar.show_login_dialog()},on_torrent_download:function(){if(!this.$store.state.hasLogin)return this.$app._userbar.show_login_dialog();this.$router.push("/download/torrent/"+this.topic_data.id)}}},l=c,_=(i("525d"),i("2877")),d=i("fe09"),m=Object(_["a"])(l,n,r,!1,null,"0c49b19f",null),u=m.exports;m.options.components=Object.assign(Object.create(m.options.components||null),m.options.components||{},{QMenu:d["v"],QList:d["u"],QItem:d["q"],QItemSection:d["r"]}),m.options.directives=Object.assign(Object.create(m.options.directives||null),m.options.directives||{},{ClosePopup:d["a"]});var p={name:"video_tab",components:{thread_manager:o["a"],video_download:u},props:{online_video:void 0,topic_data:void 0},computed:{is_manager:function(){try{return this.$store.state.user.userinfo.is_manager}catch(t){}return!1}},data:function(){return{defalut_tabinfo:{is_like:!1,is_dislike:!1,is_star:!1,like_count:0},tabinfo:Object.assign({},this.defalut_tabinfo),loaded_tabinfo:!1}},created:function(){this.online_video||(this.online_video=this.topic_data.video_info.online_videos[0]),this.load_tabinfo()},methods:{load_tabinfo:function(){var t=this;this.$store.state.hasLogin?this.$axios.get("/app/video/tabinfo",{params:{hash_id:this.online_video.hash_id}}).then((function(e){t.tabinfo=Object.assign(t.tabinfo,e.data),t.loaded_tabinfo=!0,t.$forceUpdate()})).catch((function(t){})):this.loaded_tabinfo=!0},on_video_like:function(){var t=this;if(!this.$store.state.hasLogin)return this.show_no_login_dialog?this.show_no_login_dialog():this.$app._userbar.show_login_dialog();var e={action:!this.tabinfo.is_like,hash_id:this.online_video.hash_id};this.$axios.post("/app/video/like",e).then((function(e){t.tabinfo.is_like=!0,t.tabinfo.is_dislike=!1,t.$forceUpdate()})).catch((function(t){}))},on_video_dislike:function(){var t=this;if(!this.$store.state.hasLogin)return this.show_no_login_dialog?this.show_no_login_dialog():this.$app._userbar.show_login_dialog();var e={action:!this.tabinfo.is_dislike,hash_id:this.online_video.hash_id};this.$axios.post("/app/video/dislike",e).then((function(e){t.tabinfo.is_like=!0,t.tabinfo.is_dislike=!1})).catch((function(t){}))},on_video_star:function(){var t=this;if(!this.$store.state.hasLogin)return this.show_no_login_dialog?this.show_no_login_dialog():this.$app._userbar.show_login_dialog();var e={action:!this.tabinfo.is_star,hash_id:this.online_video.hash_id};this.$axios.post("/app/video/star",e).then((function(e){t.tabinfo.is_star=!0,t.$forceUpdate()})).catch((function(t){}))}}},v=p,h=(i("4d1a"),i("6544")),f=i.n(h),g=i("132d"),b=i("0fd9"),w=Object(_["a"])(v,s,a,!1,null,"116a09b0",null);e["a"]=w.exports;w.options.components=Object.assign(Object.create(w.options.components||null),w.options.components||{},{QTooltip:d["H"]}),f()(w,{VIcon:g["a"],VRow:b["a"]})},"227a":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.comment_data&&t.comment_data.comments&&0==t.comment_data.comments.length?i("div",{staticClass:"text-center p-3"},[t._v(" 暂无回复。 ")]):i("div",{staticClass:"items card-body"},[t.comment_data?i("div",t._l(t.comment_data.comments,(function(t,e){return i("comment_item",{key:t.id,attrs:{floor:e+1,comment_data:t}})})),1):t._e()])},a=[],o=(i("ac1f"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div")}),n=[],r=(i("b64b"),{name:"comment",data:function(){return{}},methods:{add_comment:function(t){t.comment_data,t.cb},load_comment_list:function(t){var e=t.id,i=t.start,s=t.limit,a=t.cb;this.$axios.get("/app/view/comment",{params:{vid:e,start:i,limit:s}}).then((function(t){var o=t.data;a&&a(o,e,i,s)})).catch((function(t){}))},get_comment_user:function(t){if(this._g.comment_users)return this._g.comment_users[t]},update_comment_users:function(t){this._g.comment_users||(this._g.comment_users={}),this._g.comment_users=Object.assign(this._g.comment_users,t)},update_comment_datas:function(t,e,i,s){this._g.comment_datas||(this._g.comment_datas={});var a=i+":"+t+":"+e;this._g.comment_datas[a]=s},get_comment_data:function(t){for(var e=Object.keys(this._g.comment_datas),i=0;i<e.length;++i)for(var s=e[i],a=0;a<this._g.comment_datas[s].length;++a)if(this._g.comment_datas[s][a]["_id"]==t)return this._g.comment_datas[s][a]},update_comment_floor:function(t,e){this._g.comment_floors||(this._g.comment_floors={}),this._g.comment_floors[t["_id"]]=e},get_comment_floor:function(t){if(this._g.comment_floors)return this._g.comment_floors[t]}}}),c=r,l=i("2877"),_=Object(l["a"])(c,o,n,!1,null,"d5f1b3ae",null),d=_.exports,m=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"reply",class:{light:t.light_css},attrs:{id:"reply-"+t.comment_data["_id"]}},[i("div",[i("div",{staticClass:"avatar"},[i("router-link",{attrs:{title:t.comment_user.username,to:"/user/"+t.comment_user.uid}},[i("img",{staticClass:"media-object avatar-48",attrs:{src:t.generate_avatar_url(t.comment_user)}})])],1),i("div",{staticClass:"infos"},[i("div",{staticClass:"info"},[i("span",{staticClass:"name"},[i("router-link",{staticClass:"user-name",attrs:{to:"/user/"+t.comment_user.uid}},[t._v(" "+t._s(t.comment_user.username)+" ")])],1),i("span",{staticClass:"sub-info"},[t.floor?i("span",{staticClass:"floor"},[t._v("#"+t._s(t.floor))]):t._e(),t._v(" · "),i("a",{staticClass:"time"},[i("abbr",{staticClass:"timeago"},[t._v(t._s(t.showDate(t.comment_data.time)))])])]),i("span",{staticClass:"opts pull-right"},[i("span",{staticClass:"hideable mr-2"},[t.is_self?i("a",{staticClass:"edit fa fa-edit ",attrs:{title:"修改回帖"}},[i("q-tooltip",[t._v(" 修改回帖 ")])],1):t._e(),t._v(" "),i("a",{staticClass:"btn-reply",attrs:{href:"#reply",title:"回复此楼"},on:{click:t.reply_comment_event}},[i("v-icon",{attrs:{color:"grey",small:!0,dark:""}},[t._v(" fa fa-reply ")]),i("q-tooltip",[t._v(" 回复此楼 ")])],1)]),i("a",{staticClass:"likeable deactive",class:{active:t.is_like},attrs:{title:"赞"},on:{click:function(e){return t.on_comment_like("like")}}},[i("v-icon",{attrs:{color:"grey",small:!0,dark:""}},[t._v(" thumb_up ")]),i("q-tooltip",[t._v(" 赞 ")]),t._v(" "),t.comment_data.like_list&&t.comment_data.like_list.length>0?i("span",[t._v(t._s(t.comment_data.like_list.length)+"个赞")]):t._e()],1),i("a",{staticClass:"likeable deactive",class:{active:t.is_dislike},attrs:{title:"踩"},on:{click:function(e){return t.on_comment_like("dislike")}}},[i("v-icon",{attrs:{color:"grey",small:!0,dark:""}},[t._v(" thumb_down ")]),i("q-tooltip",[t._v(" 踩 ")]),t._v(" "),t.comment_data.dislike_list&&t.comment_data.dislike_list.length>0?i("span",[t._v(t._s(t.comment_data.dislike_list.length)+"个踩 ")]):t._e()],1)])]),t.reply_commnet?i("div",{staticClass:"reply-to-block"},[i("div",{staticClass:"info"},[t._v(" 对 "),i("a",{attrs:{href:"#reply-"+t.reply_commnet["_id"]}},[i("img",{staticClass:"media-object avatar-16",attrs:{src:t.generate_avatar_url(t.reply_commnet.comment_user)}}),i("span",{staticClass:"user-name"},[t._v(t._s(t.reply_commnet.comment_user.username))]),t._v(" "),t.get_comment_floor(t.reply_commnet["_id"])?i("span",{staticClass:"reply-floor"},[t._v("#"+t._s(t.get_comment_floor(t.reply_commnet["_id"])))]):t._e()]),t._v(" 回复 ")])]):t._e(),i("div",{staticClass:"markdown"},[i("p",[t._v(t._s(t.comment_data.message))])])])])])},u=[],p=(i("c975"),{name:"item",mixins:[d],props:{comment_data:{},floor:void 0},data:function(){return{light_css:!1}},created:function(){this.listeners["add:comment:item"]=this.$hub.on("event:add:comment",(function(t){})),this.light_css=this.comment_data.light_css,this.update_comment_floor(this.comment_data,this.floor)},destroyed:function(){this.listeners["add:comment:item"].off()},methods:{on_comment_like:function(t){var e=this;if(!this.$store.state.hasLogin)return this.$app._userbar.show_login_dialog();var i=!1;i="like"==t?!this.is_like:!this.is_dislike;var s={action:t,comment_id:this.comment_data["_id"],active:i};this.$axios.post("/app/comment/like",s).then((function(i){"like"==t?(e.comment_data.like_list||(e.comment_data.like_list=[]),e.is_like?e.comment_data.like_list.remove(e.$store.state.user.userinfo.uid):(e.comment_data.like_list.push(e.$store.state.user.userinfo.uid),e.comment_data.dislike_list.remove(e.$store.state.user.userinfo.uid))):(e.comment_data.dislike_list||(e.comment_data.dislike_list=[]),e.is_dislike?e.comment_data.dislike_list.remove(e.$store.state.user.userinfo.uid):(e.comment_data.dislike_list.push(e.$store.state.user.userinfo.uid),e.comment_data.like_list.remove(e.$store.state.user.userinfo.uid)),e.$forceUpdate())})).catch((function(t){}))},reply_comment_event:function(){this.$hub.emit("event:reply:comment",this.comment_data),setTimeout((function(){document.querySelector("#reply").scrollIntoView()}),1)}},computed:{is_self:function(){var t=this.$store.state.hasLogin&&this.$store.state.user.userinfo.uid==this.comment_user.uid;return t},comment_user:function(){return this.comment_data.comment_user?this.comment_data.comment_user:this.get_comment_user(this.comment_data.comment_uid)},reply_commnet:function(){if(this.comment_data.reply_comment_id)return this.get_comment_data(this.comment_data.reply_comment_id)},is_like:function(){if(this.$store.state.hasLogin){var t=this.$store.state.user.userinfo.uid;if(this.comment_data.like_list&&this.comment_data.like_list.indexOf(t)>=0)return!0}return!1},is_dislike:function(){if(this.$store.state.hasLogin){var t=this.$store.state.user.userinfo.uid;if(this.comment_data.dislike_list&&this.comment_data.dislike_list.indexOf(t)>=0)return!0}return!1}}}),v=p,h=i("fe09"),f=i("6544"),g=i.n(f),b=i("132d"),w=Object(l["a"])(v,m,u,!1,null,"26a2dcb8",null),y=w.exports;w.options.components=Object.assign(Object.create(w.options.components||null),w.options.components||{},{QTooltip:h["H"]}),g()(w,{VIcon:b["a"]});var k={mixins:[d],components:{comment_item:y},name:"list",props:{topic_data:{}},data:function(){return{comment_data:{},all_comment_users:{}}},created:function(){var t=this;this.load_comment_list({id:this.topic_data.id,start:0,limit:36,cb:this.on_comment_list}),this.listeners["add:comment:list"]=this.$hub.on("event:add:comment",(function(e){e.light_css=!0,t.comment_data.comments.push(e)}))},methods:{on_comment_list:function(t,e,i,s){var a=this,o=t.comment_users;this.update_comment_users(o),this.update_comment_datas(i,s,e,t.comments),this.comment_data=t,this.goto_anchor((function(){a.show_assgin_reply()}))},show_assgin_reply:function(){var t=/reply-([a-z0-9]+)/,e=t.exec(location.hash);if(t.test(location.hash))e[1]}},destroyed:function(){this.listeners["add:comment:list"]&&this.listeners["add:comment:list"].off()}},C=k,$=Object(l["a"])(C,s,a,!1,null,"58be7094",null);e["a"]=$.exports},"2a12":function(t,e,i){"use strict";var s=i("8c2d"),a=i.n(s);a.a},"417f":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.show?i("div",[t.topic_data&&t.topic_data.video_info?i("div",[t.is_ios()?i("div",{staticClass:"ios_player",attrs:{id:"ios_player"}},[i("video",{attrs:{id:"orginal_video_player",preload:"auto",width:"100%",height:"100%",controls:"",crossorigin:"","webkit-playsinline":"",playsinline:"",poster:t.get_cover_image_url(),autoplay:""}},[i("source",{attrs:{src:t.get_m3u8_url(),type:"application/x-mpegURL"}})])]):i("div",{directives:[{name:"show",rawName:"v-show",value:t.player,expression:"player"}]},[i("remote-script",{attrs:{type:"text/javascript",charset:"UTF-8",src:"https://"+t.$web_conf.set_host+"/static/js/lib/hls.js"}}),i("remote-script",{attrs:{type:"text/javascript",charset:"UTF-8",src:"https://"+t.$web_conf.set_host+"/static/plyr/plyr.js"}}),i("remote-script",{attrs:{type:"text/javascript",charset:"UTF-8",src:"https://"+t.$web_conf.set_host+"/static/js/lib/hammer.min.js"}}),i("div",{attrs:{id:"video-player-container"}},[i("video",{attrs:{id:"video-player",preload:"auto","webkit-playsinline":"true",playsinline:"true",controls:"",crossorigin:""}}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.is_show_video_percent,expression:"is_show_video_percent"}],ref:"video_percent"},[i("q-circular-progress",{staticClass:" video_percent",attrs:{"show-value":"","font-size":"12px",value:t.video_percent,size:"50px",thickness:.22,color:"red","track-color":"black"}},[t._v(" "+t._s(t.video_percent)+"% ")])],1),i("div",{directives:[{name:"show",rawName:"v-show",value:t.show_touch_play_progress_flag,expression:"show_touch_play_progress_flag"}],ref:"touch_play_progress",staticClass:"touch-play-progress",attrs:{id:"touch-play-progress"}},[i("span",{staticClass:"touch-play-time"},[t._v(t._s(t.touch_play_time))]),t._v("/"),i("span",{staticClass:"current-play-time"},[t._v(t._s(t.touch_current_play_time))])])])],1)]):t._e(),t.player||t.is_ios()?t._e():i("div",[i("q-skeleton",{attrs:{height:"320px",square:""}})],1),!t.embed&&t.online_video?i("video_tab",{staticClass:"mt-2 mb-2",attrs:{online_video:t.online_video,topic_data:t.topic_data}}):t._e(),!t.embed&&t.online_video&&t.is_jav_video?i("video_jav",{attrs:{topic_data:t.topic_data,online_video:t.online_video}}):t._e(),!t.embed&&t.online_video?i("video_servers",{attrs:{topic_data:t.topic_data,online_video:t.online_video,select_server_name:t.select_server_name},on:{"update:select_server_name":function(e){t.select_server_name=e}}}):t._e()],1):t._e()},a=[],o=(i("c975"),i("b680"),i("d3b7"),i("1bc8")),n=i("717a"),r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"mb-1 mt-2 font-weight-bold"},[t._v(" 线路:")]),i("v-row",t._l(t.this_video_servers,(function(e,s){return i("v-btn",{key:e.name,staticClass:"ma-2",attrs:{outlined:"",color:t.select_server_name==s?"error":""},on:{click:function(e){return t.on_select_sever(s)}}},[t._v(" "+t._s(e.name)+" ")])})),1)],1)},c=[],l={name:"video_servers",props:{online_video:void 0,topic_data:void 0,select_server_name:void 0},data:function(){return{this_video_servers:void 0}},created:function(){this.this_video_servers=this.$xx_cdn_conf[this.online_video.space_name],this.select_server_name||(this.select_server_name="cdn_xxxhostcf")},watch:{select_server_name:function(t){this.$emit("update:select_server_name",t)}},methods:{on_select_sever:function(t){this.select_server_name!=t&&(this.select_server_name=t)}}},_=l,d=i("2877"),m=i("6544"),u=i.n(m),p=i("8336"),v=i("0fd9"),h=Object(d["a"])(_,r,c,!1,null,"67ebbe3b",null),f=h.exports;u()(h,{VBtn:p["a"],VRow:v["a"]}),i.e("chunk-7722135a").then(i.t.bind(null,"ccd3",7)),i.e("chunk-74917cdf").then(i.t.bind(null,"637d",7));var g={name:"video_watch",components:{video_tab:o["a"],video_jav:n["a"],video_servers:f},props:{topic_data:void 0,show_title:void 0,embed:void 0},data:function(){return{show:!0,player:void 0,video_ele:void 0,video_percent:void 0,video_status:void 0,online_video:void 0,select_server_name:void 0,show_touch_play_progress_flag:!1,touch_play_time:"",touch_current_play_time:""}},created:function(){this.select_server_name=localStorage.getItem("select_server_name"),this.select_server_name||(this.select_server_name="cdn_xxxhostcf"),this.init()},computed:{is_jav_video:function(){var t=this.topic_data.video_info;return 2===t["av_data_type"]},is_show_video_percent:function(){return!(isNaN(this.video_percent)||!this.video_status)&&("playing"!=this.video_status&&"pause"!=this.video_status&&"canplay"!=this.video_status)}},watch:{select_server_name:function(t){this.on_switch_server(t)}},methods:{init:function(){this.online_video=this.topic_data.video_info.online_videos[0],this.$nextTick(this.init_video_player),window._t=this},init_video_player:function(){var t=this;if(this.is_ios())this.player=document.querySelector("#orginal_video_player"),this.player.addEventListener("loadeddata",(function(){}),!1);else{if(!window.Plyr||!window.Hls)return setTimeout(this.init_video_player,100);window.Hls&&window.Hls.DefaultConfig&&(window.Hls.DefaultConfig.maxBufferLength=120,window.Hls.DefaultConfig.maxBufferSize=1e8),function(t,e){var i=new XMLHttpRequest,s=t.body;i.open("GET",e,!0),i.send(),i.onload=function(){var e=t.createElement("div");e.setAttribute("hidden",""),e.innerHTML=i.responseText,s.insertBefore(e,s.childNodes[0])}}(document,"/static/images/plyr.svg?123");var e="video-player";if(this.video_ele=document.querySelector("#video-player-container video"),!this.video_ele)return setTimeout(this.init_video_player,100);this.player=new window.Plyr("#"+e,{captions:{active:!0,update:!0,language:"en"}});var i=window.Hls,s=i.isSupported();if(s){var a=new i({});a.loadSource(this.get_m3u8_url()),a.attachMedia(this.video_ele),a.on(i.Events.MANIFEST_PARSED,(function(t){})),window.hls=a,a.on(i.Events.FRAG_LOAD_PROGRESS,(function(e,i){i.frag;var s=i.stats,a=parseInt(s.loaded/s.total*100);isNaN(a)||(t.video_percent=a)})),a.on(i.Events.FRAG_LOADING,(function(t,e){e.frag})),a.on(i.Events.FRAG_LOADED,(function(t,e){e.frag}));a.p2pEngine;this.video_ele.addEventListener("waiting",(function(e){t.video_status="waiting"}),!0),this.video_ele.addEventListener("seeking",(function(e){t.video_status="seeking",t.video_percent=0}),!0),this.video_ele.addEventListener("canplay",(function(e){t.video_status="canplay"}),!0),this.video_ele.addEventListener("playing",(function(e){t.video_status="playing",t.video_percent=0}),!0),this.video_ele.addEventListener("pause",(function(e){t.video_status="pause",t.video_percent=0}),!0)}var o=this.get_cover_image_url();this.player.poster=o,this.add_touch();var n=document.querySelector(".plyr");n.appendChild(this.$refs["touch_play_progress"]),n.appendChild(this.$refs["video_percent"])}},get_cover_image_url:function(){var t=this.generate_cover_url(this.online_video.space_name,this.online_video.hash_id);return t},get_m3u8_url:function(){var t="/video/"+this.topic_data.video_info.online_videos[0].hash_id+".m3u8?video_server="+this.select_server_name,e=window.location.host;return e.indexOf("localhost")>=0&&(t="https://"+this.$debug_host+t),t},on_switch_server:function(t){var e=this;this.select_server_name=t,localStorage.setItem("select_server_name",this.select_server_name),this.show=!1,this.$nextTick((function(){e.show=!0,e.init(),e.$nextTick((function(){var t=function(){e.player?e.player.play():setTimeout(e.auto_play,200)};t()})),e.$ga&&e.$ga.event({eventCategory:"on_switch_server",eventAction:"switch",eventLabel:e.select_server_name,eventValue:e.$store.state.hasLogin?"1":"2"})}))},add_touch:function(){var t=this;if(!window.Hammer)return setTimeout(this.add_touch,500);function e(t,e){return(t/Math.pow(10,e)).toFixed(e).substr(2)}var i=function(t,i){t=t<0?0:t;var s=Math.floor(t%60),a=Math.floor(t/60%60),o=Math.floor(t/3600),n=Math.floor(i/60%60),r=Math.floor(i/3600);return(isNaN(t)||t===1/0)&&(o=a=s="-"),o=o>0||r>0?o:"0",a=(o||n>=10)&&a<10?"0"+a:a,s=s<10?"0"+s:s,e(o,2)+":"+e(a,2)+":"+e(s,2)},s=i;function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;return s(t,e)}var o=function(e){var i=t.player.duration,s=t.player.currentTime,o=s+e/document.body.clientWidth*420;return o>i&&(o=i),o<0&&(o=0),t.show_touch_play_progress_flag=!0,t.touch_current_play_time=a(i),t.touch_play_time=a(o),o},n=function(){t.show_touch_play_progress_flag=!1},r=function(){var e=void 0,i=new window.Hammer(document.getElementById("video-player-container"));i.on("pan",(function(t){"panright"==t.additionalEvent&&t.deltaX>35&&(e=o(t.deltaX)),"panleft"==t.additionalEvent&&t.deltaX<-35&&(e=o(t.deltaX))})),i.on("panend",(function(i){n(),e&&(t.player.currentTime=e,t.player.play(),e=void 0)})),i.on("pancancel",(function(){n()}))};r()}}},b=g,w=(i("54ce"),i("fe09")),y=Object(d["a"])(b,s,a,!1,null,"4cf68aea",null);e["a"]=y.exports;y.options.components=Object.assign(Object.create(y.options.components||null),y.options.components||{},{QCircularProgress:w["j"],QSkeleton:w["z"]})},"47e4":function(t,e,i){"use strict";var s=i("f3e8"),a=i.n(s);a.a},"4d1a":function(t,e,i){"use strict";var s=i("970e"),a=i.n(s);a.a},"525d":function(t,e,i){"use strict";var s=i("7564"),a=i.n(s);a.a},"54ce":function(t,e,i){"use strict";var s=i("deb4"),a=i.n(s);a.a},"717a":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.video_jav_info?i("div",[i("ul",{staticClass:"works-detail-info-lst"},[t.video_jav_info.video_cast?i("li",{staticClass:"works-detail-info-item js-toggle-target--actress"},[i("dl",{staticClass:"works-detail-info-desc-lst"},[i("dt",{staticClass:"works-detail-info-desc-ttl"},[t._v(t._s(t.$l("actor")))]),i("dd",{staticClass:"works-detail-info-desc-tx"},[i("ul",{staticClass:"works-detail-info-desc-txt-lst"},t._l(t.video_jav_info.video_cast,(function(e){return i("li",{key:e,staticClass:"works-detail-info-desc-txt-item"},[i("router-link",{attrs:{to:"/jav/actress/"+e}},[t._v(t._s(e))])],1)})),0)])])]):t._e(),t._m(0),t.video_jav_info.video_genres?i("li",{staticClass:"works-detail-info-item"},[i("dl",{staticClass:"works-detail-info-desc-lst"},[i("dt",{staticClass:"works-detail-info-desc-ttl"},[t._v("分类")]),i("dd",{staticClass:"works-detail-info-desc-tx"},[i("ul",{staticClass:"works-detail-info-desc-txt-lst"},t._l(t.video_jav_info.video_genres,(function(e){return i("li",{staticClass:"works-detail-info-desc-txt-item"},[i("router-link",{attrs:{to:"/jav/genre/"+e}},[t._v(t._s(e))])],1)})),0)])])]):t._e(),i("li",{staticClass:"works-detail-info-item"},[i("dl",{staticClass:"works-detail-info-desc-lst"},[i("dt",{staticClass:"works-detail-info-desc-ttl"},[t._v(t._s(t.$l("view.fanhao"))+":")]),i("dd",{staticClass:"works-detail-info-desc-tx"},[i("ul",{staticClass:"works-detail-info-desc-txt-lst"},[i("li",{staticClass:"works-detail-info-desc-txt-item works-detail-info-desc-txt-item--fix"},[i("span",[t._v(t._s(t.topic_data.video_info.fanhao))])])])])])])])]):t._e()},a=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("li",{staticClass:"works-detail-info-item none"},[i("dl",{staticClass:"works-detail-info-desc-lst"},[i("dt",{staticClass:"works-detail-info-desc-ttl"},[t._v("发行日期")]),i("dd",{staticClass:"works-detail-info-desc-tx"},[i("ul",{staticClass:"works-detail-info-desc-txt-lst"},[i("li",{staticClass:"works-detail-info-desc-txt-item"},[i("a",{attrs:{href:"#"}},[t._v("2020年11月7日")])])])])])])}],o={name:"video_jav",props:{online_video:void 0,topic_data:void 0},computed:{video_jav_info:function(){for(var t=["chinese","japanese","english"],e=0;e<t.length;++e){var i=t[e];if(this.topic_data[i])return this.topic_data[i]}}},created:function(){}},n=o,r=(i("2a12"),i("2877")),c=Object(r["a"])(n,s,a,!1,null,"e62fa4cc",null);e["a"]=c.exports},7564:function(t,e,i){},8548:function(t,e,i){},"8c2d":function(t,e,i){},9536:function(t,e,i){"use strict";var s=i("8548"),a=i.n(s);a.a},"970e":function(t,e,i){},c286:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a",{attrs:{title:"",rel:"nofollow"}},[i("i",{staticClass:"fas fa-ellipsis-h"}),i("q-menu",[i("q-list",{staticStyle:{"min-width":"100px"}},[i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""}},[i("q-item-section",[t._v("设置为热门")])],1),i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(e){t.set_to_top(Boolean(!t.topic_data.manager_set.settotop))}}},[i("q-item-section",[t._v(t._s(t.topic_data.manager_set.settotop?t.$l("thread.unsettotop"):t.$l("thread.settotop"))+" ")])],1),i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(e){t.set_to_essence(Boolean(!t.topic_data.manager_set.settoessence))}}},[i("q-item-section",[t._v(" "+t._s(t.topic_data.manager_set.settoessence?t.$l("thread.unsettoessence"):t.$l("thread.settoessence"))+" ")])],1),i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(e){t.set_to_carousel(Boolean(!t.topic_data.manager_set.setcarousel))}}},[i("q-item-section",[t._v(" "+t._s(t.topic_data.manager_set.setcarousel?t.$l("thread.unsetcarousel"):t.$l("thread.setcarousel"))+" ")])],1),i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(e){t.set_to_idnextop(Boolean(!t.topic_data.manager_set.setindextop))}}},[i("q-item-section",[t._v(" "+t._s(t.topic_data.manager_set.setindextop?"取消首页顶部":"设置首页顶部")+" ")])],1),i("q-separator"),i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""}},[i("q-item-section",[t._v("删除")])],1)],1)],1)],1)},a=[],o={name:"thread_manager",props:{topic_data:{}},destroyed:function(){this.listener_loginout.off(),this.listener_login.off()},created:function(){var t=this;this.listener_loginout=this.$hub.on("event:loginout",(function(e){t.$nextTick((function(){t.$forceUpdate()}))})),this.listener_login=this.$hub.on("event:login",(function(e){t.$nextTick((function(){t.$forceUpdate()}))})),this.topic_data&&(this.topic_data.manager_set||(this.topic_data.manager_set={}))},methods:{set_to_idnextop:function(t){var e=this,i={id:this.topic_data.id,action:t};this.$axios.post("/app/topic/setindextop",i).then((function(t){var i=t.data.setindextop;e.topic_data.manager_set.setindextop=i,e.$forceUpdate()}))},set_to_carousel:function(t){var e=this,i={id:this.topic_data.id,action:t};this.$axios.post("/app/topic/setcarousel",i).then((function(t){var i=t.data.setcarousel;e.topic_data.manager_set.setcarousel=i,e.$forceUpdate()}))},set_to_essence:function(t){var e=this,i={id:this.topic_data.id,action:t};this.$axios.post("/app/topic/setessence",i).then((function(t){var i=t.data.settoessence;e.topic_data.manager_set.settoessence=i,e.$forceUpdate()}))},set_to_top:function(t){var e=this,i={id:this.topic_data.id,action:t};this.$axios.post("/app/topic/settotop",i).then((function(t){var i=t.data.settotop;e.topic_data.manager_set.settotop=i,e.$forceUpdate()}))}}},n=o,r=i("2877"),c=i("fe09"),l=Object(r["a"])(n,s,a,!1,null,"41de4f68",null);e["a"]=l.exports;l.options.components=Object.assign(Object.create(l.options.components||null),l.options.components||{},{QMenu:c["v"],QList:c["u"],QItem:c["q"],QItemSection:c["r"],QSeparator:c["y"]}),l.options.directives=Object.assign(Object.create(l.options.directives||null),l.options.directives||{},{ClosePopup:c["a"]})},c96ad:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.$store.state.hasLogin?i("div",[i("q-img",{staticClass:"rounded-borders",staticStyle:{"min-height":"150px"},attrs:{src:t.cover_image_url,"spinner-color":"white","img-class":"my-custom-image",ratio:16/9,"placeholder-src":"https://"+t.$web_conf.set_host+"/static/images/placeholder-md,jpg"}},[i("div",{staticClass:"vip-container"},[i("h5",{staticClass:"desciption",staticStyle:{"margin-top":"10%"}},[t._v("您已超过每日允许的观看次数。")]),i("h5",{staticClass:"desciption"},[t._v("加入VIP 后即可无限制观看精品视频！")]),i("h5",{staticClass:"desciption"},[t._v("升级成为VIP,可以享受下载视频等特权")]),i("div",{staticClass:"two-button mb10 xxbtn",attrs:{align:"center"}},[i("v-btn",{staticClass:"mt-2",attrs:{color:"primary",depressed:""},on:{click:function(e){return t.go("/buy/vip")}}},[t._v(" "+t._s(t.$l("vip.open_vip"))+" ")])],1)])])],1):i("div",[i("v-responsive",{attrs:{"aspect-ratio":16/9}},[i("q-img",{staticClass:"rounded-borders",attrs:{src:t.cover_image_url,"spinner-color":"white","img-class":"my-custom-image"}},[i("div",{staticClass:"vip-container"},[i("h5",{staticClass:"desciption"},[t._v("注册会员，精彩继续观看")]),i("h5",{staticClass:"desciption"},[t._v("非注册会员，每日限制观看3个视频")]),i("div",{staticClass:"two-button mb10 xxbtn",attrs:{align:"center"}},[i("div",{staticStyle:{padding:"20px"},attrs:{"data-turbolinks-action":"replace"}},[i("a",{staticClass:"btn btn-primary",attrs:{href:"/account/login"}},[t._v("登录")]),t._v(" "),i("a",{staticClass:"btn btn-danger",attrs:{href:"/account/register"}},[t._v("注册")]),t._v("。 ")])])])])],1)],1)},a=[],o={name:"watch_limit",props:{topic_data:void 0},created:function(){this.$ga&&this.$ga.event({eventCategory:"watch_limit",eventAction:"show",eventLabel:"islogin",eventValue:this.$store.state.hasLogin?"1":"2"})},computed:{cover_image_url:function(){var t=this.topic_data.video_info.online_videos[0],e=t.hash_id,i=this.generate_cover_url(t.space_name,e);return i}}},n=o,r=(i("47e4"),i("2877")),c=i("fe09"),l=i("6544"),_=i.n(l),d=i("8336"),m=i("6b53"),u=Object(r["a"])(n,s,a,!1,null,"931d2b66",null);e["a"]=u.exports;u.options.components=Object.assign(Object.create(u.options.components||null),u.options.components||{},{QImg:c["o"]}),_()(u,{VBtn:d["a"],VResponsive:m["a"]})},d5dc:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.$store.state.hasLogin?i("div",{staticClass:"card-body"},[t.reply_tip&&t.reply_tip.length>0?i("div",{staticClass:"alert alert-success"},[i("button",{staticClass:"close",attrs:{"data-dismiss":"alert"}},[i("span",{attrs:{"aria-hidden":"true"},on:{click:function(e){t.reply_tip=""}}},[t._v("×")])]),t._v(" 回复成功。 ")]):t._e(),i("div",{staticClass:"card-title hide-ios float-lg-left"},[t._v("发起回帖")]),i("div",{staticClass:"editor-toolbar clearfix float-lg-right"},[t.reply_comment_data?i("div",{staticClass:"reply-to pull-right"},[i("i",{staticClass:"fa fa-reply",attrs:{title:"回复"}}),i("a",{staticClass:"user"},[t._v(t._s(t.reply_comment_data.comment_user.username))]),i("a",{staticClass:"close",on:{click:function(e){t.reply_comment_data=void 0}}},[i("i",{staticClass:"fa fa-close"})])]):t._e(),t._m(0)]),i("form",{attrs:{id:"new_reply","accept-charset":"UTF-8",method:"post"}},[i("div",{staticClass:"form-group"},[i("div",{staticClass:"topic-editor-dropzone dz-clickable"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment_data.message,expression:"comment_data.message"}],staticClass:"topic-editor form-control",attrs:{rows:"4",id:"reply_body"},domProps:{value:t.comment_data.message},on:{input:function(e){e.target.composing||t.$set(t.comment_data,"message",e.target.value)}}})]),i("div",{staticClass:"markdown form-control",staticStyle:{display:"none"},attrs:{id:"preview"}})]),i("div",{staticClass:"submit-buttons"},[i("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-disable-with":"提交回复"},on:{click:t.on_reply}},[t._v("提交回复 ")]),t._m(1)])])]):i("div",[t._m(2)])])},a=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"toolbar-buttons none"},[i("a",{staticClass:"nav-link upload-button",attrs:{id:"editor-upload-image",href:"#",title:"上传图片"}},[i("i",{staticClass:"upload-icon fa fa-image"}),i("i",{staticClass:"loading fa fa-circle-o-notch fa-spin"})]),i("a",{staticClass:"nav-link preview",attrs:{href:"#",title:"预览"}},[i("i",{staticClass:"fa fa-eye"})])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"help-inline none",staticStyle:{"padding-left":"5px"},attrs:{title:"或者 Ctrl + Enter"}},[i("kbd",[t._v("Command")]),t._v(" + "),i("kbd",[t._v("Enter")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"card"},[i("div",{staticClass:"card-body"},[i("div",{staticClass:"form box",attrs:{id:"reply"}},[i("div",{staticStyle:{padding:"20px"},attrs:{"data-turbolinks-action":"replace"}},[t._v(" 需要 "),i("a",{staticClass:"btn btn-primary",attrs:{href:"/account/login"}},[t._v("登录")]),t._v(" 后方可回复, 如果你还没有账号请点击这里 "),i("a",{staticClass:"btn btn-danger",attrs:{href:"/account/register"}},[t._v("注册")]),t._v("。 ")])])])])}],o=(i("a4fb"),{name:"reply",props:{topic_data:{}},data:function(){return{comment_data:{reply_id:"",comment_item_id:""},reply_tip:"",reply_comment_data:void 0}},created:function(){var t=this;this.listeners["reply:comment:reply"]=this.$hub.on("event:reply:comment",(function(e){t.reply_comment_data=e}))},destroyed:function(){this.listeners["reply:comment:reply"].off()},methods:{on_reply:function(){var t=this;return this.comment_data.vid=this.topic_data.id,this.comment_data.time=(new Date).valueOf()/1e3,this.comment_data.message.length<=1?(this.$message("评论的内容过短，不得少于1个字",{type:"error"}),!1):(this.reply_comment_data&&(this.comment_data.reply_comment_id=this.reply_comment_data["_id"]),this.$axios.post("/app/view/comment",this.comment_data).then((function(e){if(e){var i=Object.assign({},t.comment_data);i.comment_user=t.$store.state.user.userinfo,i.uid=t.$store.state.user.userinfo.uid,i._id=e.data.add_comment["_id"],t.$hub.emit("event:add:comment",i),t.comment_data.message="",t.reply_tip="回复成功"}})).catch((function(e){t.$message("提交评论出错！")})),!1)}}}),n=o,r=(i("9536"),i("2877")),c=Object(r["a"])(n,s,a,!1,null,"61c71bcc",null);e["a"]=c.exports},deb4:function(t,e,i){},f3e8:function(t,e,i){}}]);
//# sourceMappingURL=chunk-0c8b93c0.d36f0699.js.map