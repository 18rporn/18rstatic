(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4bee5b8e"],{"1bc8":function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.loaded_tabinfo?s("div",{staticClass:"style-scope ytd-video-primary-info-renderer"},[t.show_video_share_dialog?s("video_share_dialog",{attrs:{show:t.show_video_share_dialog,topic_data:t.topic_data}}):t._e(),s("div",{staticClass:"style-scope ytd-video-primary-info-renderer",attrs:{id:"menu"}},[s("ytd-menu-renderer",{staticClass:"style-scope ytd-video-primary-info-renderer"},[s("div",{staticClass:"style-scope ytd-menu-renderer",attrs:{id:"top-level-buttons"}},[s("span",{staticClass:"style-scope ytd-menu-renderer force-icon-button style-default-active",class:{active:t.tabinfo.is_like},attrs:{"button-renderer":"true","style-action-button":"","is-icon-button":""},on:{click:t.on_video_like}},[s("a",{staticClass:"yt-simple-endpoint style-scope ytd-toggle-button-renderer",attrs:{tabindex:"-1"}},[s("yt-icon-button",{staticClass:"style-scope ytd-toggle-button-renderer style-default-active",attrs:{id:"button"}},[s("button",{staticClass:"style-scope yt-icon-button"},[s("yt-icon",{staticClass:"style-scope ytd-toggle-button-renderer"},[s("svg",{staticClass:"style-scope yt-icon",staticStyle:{"pointer-events":"none",display:"block",width:"100%",height:"100%"},attrs:{viewBox:"0 0 24 24",preserveAspectRatio:"xMidYMid meet",focusable:"false"}},[s("g",{staticClass:"style-scope yt-icon"},[s("path",{staticClass:"style-scope yt-icon",attrs:{d:"M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-1.91l-.01-.01L23 10z"}})])])])],1),s("yt-interaction",{staticClass:"circular style-scope yt-icon-button",attrs:{id:"interaction"}},[s("div",{staticClass:"stroke style-scope yt-interaction"}),s("div",{staticClass:"fill style-scope yt-interaction"})])],1),s("span",{staticClass:"style-scope ytd-toggle-button-renderer style-default-active"},[t._v(" "+t._s(t.tabinfo.is_like?"已赞":"点赞")+" ")])],1),t.tabinfo.is_like?s("ytd-sentiment-bar-renderer",{staticClass:"style-scope ytd-video-primary-info-renderer",staticStyle:{width:"120%"},attrs:{activated:""}},[s("div",{staticClass:"style-scope ytd-sentiment-bar-renderer"},[s("div",{staticClass:"style-scope ytd-sentiment-bar-renderer"})]),s("tp-yt-paper-tooltip",{staticClass:"style-scope ytd-sentiment-bar-renderer",staticStyle:{left:"13.3984px",top:"-64px"},attrs:{position:"top",role:"tooltip",tabindex:"-1"}},[s("div",{staticClass:"style-scope tp-yt-paper-tooltip hidden"},[t._v(" 552,398 / 46,336 ")])])],1):t._e()],1),s("span",{staticClass:"style-scope ytd-menu-renderer force-icon-button style-text",class:{active:t.tabinfo.is_dislike},attrs:{"use-keyboard-focused":"","button-renderer":"true","style-action-button":"","is-icon-button":""},on:{click:t.on_video_dislike}},[s("a",{staticClass:"yt-simple-endpoint style-scope ytd-toggle-button-renderer",attrs:{tabindex:"-1"}},[s("yt-icon-button",{staticClass:"style-scope ytd-toggle-button-renderer style-text",attrs:{id:"button"}},[s("button",{staticClass:"style-scope yt-icon-button"},[s("yt-icon",{staticClass:"style-scope ytd-toggle-button-renderer"},[s("svg",{staticClass:"style-scope yt-icon",staticStyle:{"pointer-events":"none",display:"block",width:"100%",height:"100%"},attrs:{viewBox:"0 0 24 24",preserveAspectRatio:"xMidYMid meet",focusable:"false"}},[s("g",{staticClass:"style-scope yt-icon"},[s("path",{staticClass:"style-scope yt-icon",attrs:{d:"M15 3H6c-.83 0-1.54.5-1.84 1.22l-3.02 7.05c-.09.23-.14.47-.14.73v1.91l.01.01L1 14c0 1.1.9 2 2 2h6.31l-.95 4.57-.03.32c0 .41.17.79.44 1.06L9.83 23l6.59-6.59c.36-.36.58-.86.58-1.41V5c0-1.1-.9-2-2-2zm4 0v12h4V3h-4z"}})])])])],1),s("yt-interaction",{staticClass:"circular style-scope yt-icon-button"},[s("div",{staticClass:"stroke style-scope yt-interaction"}),s("div",{staticClass:"fill style-scope yt-interaction"})])],1),s("span",{staticClass:"style-scope ytd-toggle-button-renderer style-text"},[t._v(t._s(t.tabinfo.is_dislike?"已踩":"踩")+" ")])],1),t.tabinfo.is_dislike?s("ytd-sentiment-bar-renderer",{staticClass:"style-scope ytd-video-primary-info-renderer",staticStyle:{width:"120%"},attrs:{activated:""}},[s("div",{staticClass:"style-scope ytd-sentiment-bar-renderer"},[s("div",{staticClass:"style-scope ytd-sentiment-bar-renderer"})]),s("tp-yt-paper-tooltip",{staticClass:"style-scope ytd-sentiment-bar-renderer",staticStyle:{left:"13.3984px",top:"-64px"},attrs:{position:"top",role:"tooltip",tabindex:"-1"}},[s("div",{staticClass:"style-scope tp-yt-paper-tooltip hidden"},[t._v(" 552,398 / 46,336 ")])])],1):t._e()],1),s("ytd-button-renderer",{staticClass:"style-scope ytd-menu-renderer force-icon-button style-default size-default",on:{click:t.show_video_share_dialog_event}},[s("a",{staticClass:"yt-simple-endpoint style-scope ytd-button-renderer",attrs:{tabindex:"-1"}},[s("yt-icon-button",{staticClass:"style-scope ytd-button-renderer style-default size-default",attrs:{id:"button"}},[s("button",{staticClass:"style-scope yt-icon-button",attrs:{id:"button"}},[s("yt-icon",{staticClass:"style-scope ytd-button-renderer"},[s("svg",{staticClass:"style-scope yt-icon",staticStyle:{"pointer-events":"none",display:"block",width:"100%",height:"100%"},attrs:{viewBox:"0 0 24 24",preserveAspectRatio:"xMidYMid meet",focusable:"false"}},[s("g",{staticClass:"style-scope yt-icon",attrs:{"mirror-in-rtl":""}},[s("path",{staticClass:"style-scope yt-icon",attrs:{d:"M14 9V3L22 12L14 21V15C8.44 15 4.78 17.03 2 21C3.11 15.33 6.22 10.13 14 9Z"}})])])])],1),s("yt-interaction",{staticClass:"circular style-scope yt-icon-button",attrs:{id:"interaction"}},[s("div",{staticClass:"stroke style-scope yt-interaction"}),s("div",{staticClass:"fill style-scope yt-interaction"})])],1),s("yt-formatted-string",{staticClass:"style-scope ytd-button-renderer style-default size-default"},[t._v(" 分享 ")])],1)]),s("ytd-button-renderer",{staticClass:"ml-2 style-scope ytd-menu-renderer force-icon-button style-default size-default flex"},[s("a",{staticClass:"yt-simple-endpoint style-scope ytd-button-renderer flex"},[s("yt-formatted-string",{staticClass:"style-scope ytd-button-renderer style-default size-default"},[s("video_download",{staticClass:"video_tab",attrs:{topic_data:t.topic_data}})],1)],1)])],1)])],1)],1):t._e()},o=[],a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("a",{on:{click:t.on_show_download}},[s("i",{staticClass:"fas fa-cloud-download-alt"}),t._v(" "+t._s(t.$l("view.download"))+" "),s("q-menu",[s("q-list",{staticStyle:{"min-width":"100px"}},[s("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""}},[s("q-item-section",{on:{click:t.on_direct_download}},[s("i",{staticClass:"fas fa-cloud-download-alt"},[t._v(t._s(t.$l("view.direct_download"))+"(VIP)")])])],1),s("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""}},[s("q-item-section",{on:{click:t.on_torrent_download}},[s("i",{staticClass:"fas fa-magnet"},[t._v(t._s(t.$l("view.bt_download")))])])],1)],1)],1)],1)},n=[],r={name:"video_download",props:{topic_data:void 0},created:function(){},methods:{on_show_download:function(){},on_direct_download:function(){var t=this;return this.$store.state.hasLogin?this.$store.state.user.userinfo.is_vip?void this.$router.push("/download/video/"+this.topic_data.id):this.$q.dialog({title:this.$l("title_board_message"),message:this.$l("vip.download_tip"),cancel:this.$l("cancel"),ok:this.$l("vip.buy"),persistent:!0}).onOk((function(e){t.$router.push("/buy/vip")})):this.$app.show_login_dialog()},on_torrent_download:function(){if(!this.$store.state.hasLogin)return this.$app.show_login_dialog();this.$router.push("/download/torrent/"+this.topic_data.id)}}},c=r,l=(s("bba2"),s("2877")),d=s("fe09"),_=Object(l["a"])(c,a,n,!1,null,"32931fb9",null),m=_.exports;_.options.components=Object.assign(Object.create(_.options.components||null),_.options.components||{},{QMenu:d["w"],QList:d["v"],QItem:d["r"],QItemSection:d["s"]}),_.options.directives=Object.assign(Object.create(_.options.directives||null),_.options.directives||{},{ClosePopup:d["a"]});var v=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-row",{staticClass:"report-dialog",attrs:{justify:"center"}},[s("v-dialog",{attrs:{transition:"dialog-bottom-transition","max-width":"555"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[s("v-card",[s("v-card-title",{staticClass:"headline"},[s("svg",{staticClass:"style-scope yt-icon",staticStyle:{"pointer-events":"none",display:"block",width:"30px",height:"100%"},attrs:{viewBox:"0 0 24 24",preserveAspectRatio:"xMidYMid meet",focusable:"false"}},[s("g",{staticClass:"style-scope yt-icon",attrs:{"mirror-in-rtl":""}},[s("path",{staticClass:"style-scope yt-icon",attrs:{d:"M14 9V3L22 12L14 21V15C8.44 15 4.78 17.03 2 21C3.11 15.33 6.22 10.13 14 9Z"}})])]),t._v(" 分享 ")]),s("v-card-text",[s("v-container",[s("v-row",{staticClass:"pa-0"},[s("span",[t._v("复制发送给朋友：")]),s("code",{staticClass:"pt-4"},[t._v(" "+t._s(t.topic_data.title)+" "+t._s(t.share_url)+" ")])])],1)],1),s("v-card-actions",[s("v-spacer")],1)],1)],1)],1)},u=[],p={name:"video_share_dialog",props:{show:void 0,topic_data:void 0},computed:{share_url:function(){var t="https://"+this.$web_conf.set_host+"/video/"+this.topic_data.id;return t}}},h=p,f=(s("706d"),s("6544")),y=s.n(f),g=s("b0af"),b=s("99d9"),w=(s("99af"),s("4de4"),s("b64b"),s("2ca0"),s("20f6"),s("4b85"),s("a15b"),s("498a"),s("a026"));function C(t){return w["a"].extend({name:"v-".concat(t),functional:!0,props:{id:String,tag:{type:String,default:"div"}},render:function(e,s){var i=s.props,o=s.data,a=s.children;o.staticClass="".concat(t," ").concat(o.staticClass||"").trim();var n=o.attrs;if(n){o.attrs={};var r=Object.keys(n).filter((function(t){if("slot"===t)return!1;var e=n[t];return t.startsWith("data-")?(o.attrs[t]=e,!1):e||"string"===typeof e}));r.length&&(o.staticClass+=" ".concat(r.join(" ")))}return i.id&&(o.domProps=o.domProps||{},o.domProps.id=i.id),e(i.tag,o,a)}})}var k=s("d9f7"),$=C("container").extend({name:"v-container",functional:!0,props:{id:String,tag:{type:String,default:"div"},fluid:{type:Boolean,default:!1}},render:function(t,e){var s,i=e.props,o=e.data,a=e.children,n=o.attrs;return n&&(o.attrs={},s=Object.keys(n).filter((function(t){if("slot"===t)return!1;var e=n[t];return t.startsWith("data-")?(o.attrs[t]=e,!1):e||"string"===typeof e}))),i.id&&(o.domProps=o.domProps||{},o.domProps.id=i.id),t(i.tag,Object(k["a"])(o,{staticClass:"container",class:Array({"container--fluid":i.fluid}).concat(s||[])}),a)}}),x=s("169a"),j=s("0fd9"),O=s("2fa4"),L=Object(l["a"])(h,v,u,!1,null,"908820fc",null),E=L.exports;y()(L,{VCard:g["a"],VCardActions:b["a"],VCardText:b["b"],VCardTitle:b["c"],VContainer:$,VDialog:x["a"],VRow:j["a"],VSpacer:O["a"]});var S={name:"video_tab",components:{video_download:m,video_share_dialog:E},props:{online_video:void 0,topic_data:void 0},computed:{is_manager:function(){try{return this.$store.state.user.userinfo.is_manager}catch(t){}return!1}},data:function(){return{show_video_share_dialog:!1,defalut_tabinfo:{is_like:!1,is_dislike:!1,is_star:!1,like_count:0},tabinfo:Object.assign({},this.defalut_tabinfo),loaded_tabinfo:!1}},created:function(){this.online_video||(this.online_video=this.topic_data.video_info.online_videos[0]),console.log("[video_tab]online_video:",this.online_video),this.load_tabinfo()},methods:{show_video_share_dialog_event:function(){var t=this;this.show_video_share_dialog=!1,this.$nextTick((function(){t.show_video_share_dialog=!0}))},load_tabinfo:function(){var t=this;this.$store.state.hasLogin?(console.log("call load_tabinfo"),this.$axios.get("/app/video/tabinfo",{params:{hash_id:this.online_video.hash_id}}).then((function(e){t.tabinfo=Object.assign(t.tabinfo,e.data),console.log("this.tabinfo :",t.tabinfo),t.loaded_tabinfo=!0,t.$forceUpdate()})).catch((function(t){}))):this.loaded_tabinfo=!0},on_video_like:function(){var t=this;if(this.online_video||(this.online_video=this.topic_data.video_info.online_videos[0]),console.log("click on_video_like online_video:",this.online_video),!this.$store.state.hasLogin)return this.show_no_login_dialog?this.$app.show_login_dialog():this.$app._userbar.show_login_dialog();var e={action:!this.tabinfo.is_like,hash_id:this.online_video.hash_id};console.log("on_video_like:",e),this.$axios.post("/app/video/like",e).then((function(e){t.tabinfo.is_like=!0,t.tabinfo.is_dislike=!1,t.$forceUpdate()})).catch((function(t){console.log("error:",t)}))},on_video_dislike:function(){var t=this;if(this.online_video||(this.online_video=this.topic_data.video_info.online_videos[0]),!this.$store.state.hasLogin)return this.show_no_login_dialog?this.$app.show_login_dialog():this.$app._userbar.show_login_dialog();var e={action:!this.tabinfo.is_dislike,hash_id:this.online_video.hash_id};this.$axios.post("/app/video/dislike",e).then((function(e){t.tabinfo.is_like=!0,t.tabinfo.is_dislike=!1})).catch((function(t){console.log("error:",t)}))},on_video_star:function(){var t=this;if(this.online_video||(this.online_video=this.topic_data.video_info.online_videos[0]),!this.$store.state.hasLogin)return this.show_no_login_dialog?this.$app.show_login_dialog():this.$app._userbar.show_login_dialog();var e={action:!this.tabinfo.is_star,hash_id:this.online_video.hash_id};console.log("on_video_star:",e),this.$axios.post("/app/video/star",e).then((function(e){t.tabinfo.is_star=!0,t.$forceUpdate()})).catch((function(t){console.log("error:",t)}))}}},V=S,A=(s("ecb9"),Object(l["a"])(V,i,o,!1,null,null,null));e["a"]=A.exports;A.options.components=Object.assign(Object.create(A.options.components||null),A.options.components||{},{QColor:d["l"]})},2024:function(t,e,s){"use strict";var i=s("e113"),o=s.n(i);o.a},"21d5":function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"mb-1 mt-2 font-weight-bold"},[t._v(" 线路:")]),s("v-row",t._l(t.this_video_servers,(function(e,i){return s("a",{key:e.name,staticClass:"ma-2 video-server-button",class:{active:t.select_server_name==i},on:{click:function(e){return t.on_select_sever(i)}}},[t._v(" "+t._s(e.name)+" ")])})),0)],1)},o=[],a={name:"video_servers",props:{online_video:void 0,topic_data:void 0,select_server_name:void 0},data:function(){return{this_video_servers:void 0}},created:function(){console.log("$xx_cdn_conf",this.$xx_cdn_conf,this.online_video),this.this_video_servers=Object.assign({},this.$xx_cdn_conf[this.online_video.space_name]),console.log("this_video_servers:",this.this_video_servers),this.select_server_name||(this.select_server_name="cdn_xxxhostcf"),"vip"==this.select_server_name&&(this.$store.state.hasLogin||(this.select_server_name="cdn_xxxhostcf")),console.log("this_video_servers:",this.this_video_servers);var t="VIP线路";this.$store.state.user.userinfo&&this.$store.state.user.userinfo.is_vip||(t="VIP线路"),this.this_video_servers["vip"]={name:t,list:[""]}},watch:{select_server_name:function(t){this.$emit("update:select_server_name",t)}},methods:{on_select_sever:function(t){var e=this;if("vip"==t){if(!this.$store.state.hasLogin)return this.$app.show_no_login_dialog();if(!this.$store.state.user.userinfo.is_vip)return this.$q.dialog({title:this.$l("title_board_message"),message:this.$l("vip.download_tip"),cancel:this.$l("cancel"),ok:this.$l("vip.buy"),persistent:!0}).onOk((function(t){e.$router.push("/buy/vip")}))}this.select_server_name!=t&&(this.select_server_name=t,this.$ga&&this.$ga.event({eventCategory:"switch-server",eventAction:"switch",eventLabel:t,eventValue:t}))}}},n=a,r=(s("8d30"),s("2877")),c=s("fe09"),l=s("6544"),d=s.n(l),_=s("0fd9"),m=Object(r["a"])(n,i,o,!1,null,"95f5df54",null);e["a"]=m.exports;m.options.components=Object.assign(Object.create(m.options.components||null),m.options.components||{},{QColor:c["l"]}),d()(m,{VRow:_["a"]})},"227a":function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.comment_data&&t.comment_data.comments&&0==t.comment_data.comments.length?s("div",{staticClass:"text-center p-3"},[t._v(" 暂无回复。 ")]):s("div",{staticClass:"items card-body"},[t.comment_data?s("div",t._l(t.comment_data.comments,(function(t,e){return s("comment_item",{key:t.id,attrs:{floor:e+1,comment_data:t}})})),1):t._e()])},o=[],a=(s("ac1f"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div")}),n=[],r=(s("b64b"),{name:"comment",data:function(){return{}},methods:{add_comment:function(t){t.comment_data,t.cb},load_comment_list:function(t){var e=t.id,s=t.start,i=t.limit,o=t.cb;this.$axios.get("/app/view/comment",{params:{vid:e,start:s,limit:i}}).then((function(t){var a=t.data;o&&o(a,e,s,i)})).catch((function(t){}))},get_comment_user:function(t){if(this._g.comment_users)return this._g.comment_users[t]},update_comment_users:function(t){this._g.comment_users||(this._g.comment_users={}),this._g.comment_users=Object.assign(this._g.comment_users,t)},update_comment_datas:function(t,e,s,i){this._g.comment_datas||(this._g.comment_datas={});var o=s+":"+t+":"+e;console.log("update_comment_datas key:",o,i),this._g.comment_datas[o]=i,console.log("this._g.comment_datas:",this._g.comment_datas)},get_comment_data:function(t){var e=Object.keys(this._g.comment_datas);console.log("[get_comment_data] keys:",e);for(var s=0;s<e.length;++s)for(var i=e[s],o=0;o<this._g.comment_datas[i].length;++o)if(this._g.comment_datas[i][o]["_id"]==t)return console.log("[get_comment_data]",t,this._g.comment_datas[i][o]),this._g.comment_datas[i][o]},update_comment_floor:function(t,e){this._g.comment_floors||(this._g.comment_floors={}),this._g.comment_floors[t["_id"]]=e},get_comment_floor:function(t){if(this._g.comment_floors)return this._g.comment_floors[t]}}}),c=r,l=s("2877"),d=Object(l["a"])(c,a,n,!1,null,"d5f1b3ae",null),_=d.exports,m=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"reply",class:{light:t.light_css},attrs:{id:"reply-"+t.comment_data["_id"]}},[s("div",[s("div",{staticClass:"avatar"},[s("router-link",{attrs:{title:t.comment_user.username,to:"/user/"+t.comment_user.uid}},[s("img",{staticClass:"media-object avatar-48",attrs:{src:t.generate_avatar_url(t.comment_user)}})])],1),s("div",{staticClass:"infos"},[s("div",{staticClass:"info"},[s("span",{staticClass:"name"},[s("router-link",{staticClass:"user-name",attrs:{to:"/user/"+t.comment_user.uid}},[t._v(" "+t._s(t.comment_user.username)+" ")])],1),s("span",{staticClass:"sub-info"},[t.floor?s("span",{staticClass:"floor"},[t._v("#"+t._s(t.floor))]):t._e(),t._v(" · "),s("a",{staticClass:"time"},[s("abbr",{staticClass:"timeago"},[t._v(t._s(t.showDate(t.comment_data.time)))])])]),s("span",{staticClass:"opts pull-right"},[s("span",{staticClass:"hideable mr-2"},[t.is_self?s("a",{staticClass:"edit fa fa-edit ",attrs:{title:"修改回帖"}},[s("q-tooltip",[t._v(" 修改回帖 ")])],1):t._e(),t._v(" "),s("a",{staticClass:"btn-reply",attrs:{href:"#reply",title:"回复此楼"},on:{click:t.reply_comment_event}},[s("v-icon",{attrs:{color:"grey",small:!0,dark:""}},[t._v(" fa fa-reply ")]),s("q-tooltip",[t._v(" 回复此楼 ")])],1)]),s("a",{staticClass:"likeable deactive",class:{active:t.is_like},attrs:{title:"赞"},on:{click:function(e){return t.on_comment_like("like")}}},[s("v-icon",{attrs:{color:"grey",small:!0,dark:""}},[t._v(" thumb_up ")]),s("q-tooltip",[t._v(" 赞 ")]),t._v(" "),t.comment_data.like_list&&t.comment_data.like_list.length>0?s("span",[t._v(t._s(t.comment_data.like_list.length)+"个赞")]):t._e()],1),s("a",{staticClass:"likeable deactive",class:{active:t.is_dislike},attrs:{title:"踩"},on:{click:function(e){return t.on_comment_like("dislike")}}},[s("v-icon",{attrs:{color:"grey",small:!0,dark:""}},[t._v(" thumb_down ")]),s("q-tooltip",[t._v(" 踩 ")]),t._v(" "),t.comment_data.dislike_list&&t.comment_data.dislike_list.length>0?s("span",[t._v(t._s(t.comment_data.dislike_list.length)+"个踩 ")]):t._e()],1)])]),t.reply_commnet?s("div",{staticClass:"reply-to-block"},[s("div",{staticClass:"info"},[t._v(" 对 "),s("a",{attrs:{href:"#reply-"+t.reply_commnet["_id"]}},[s("img",{staticClass:"media-object avatar-16",attrs:{src:t.generate_avatar_url(t.reply_commnet.comment_user)}}),s("span",{staticClass:"user-name"},[t._v(t._s(t.reply_commnet.comment_user.username))]),t._v(" "),t.get_comment_floor(t.reply_commnet["_id"])?s("span",{staticClass:"reply-floor"},[t._v("#"+t._s(t.get_comment_floor(t.reply_commnet["_id"])))]):t._e()]),t._v(" 回复 ")])]):t._e(),s("div",{staticClass:"markdown"},[s("p",[t._v(t._s(t.comment_data.message))])])])])])},v=[],u=(s("c975"),{name:"item",mixins:[_],props:{comment_data:{},floor:void 0},data:function(){return{light_css:!1}},created:function(){this.listeners["add:comment:item"]=this.$hub.on("event:add:comment",(function(t){})),this.light_css=this.comment_data.light_css,this.update_comment_floor(this.comment_data,this.floor)},destroyed:function(){this.listeners["add:comment:item"].off()},methods:{on_comment_like:function(t){var e=this;if(!this.$store.state.hasLogin)return this.$app._userbar.show_login_dialog();var s=!1;s="like"==t?!this.is_like:!this.is_dislike;var i={action:t,comment_id:this.comment_data["_id"],active:s};this.$axios.post("/app/comment/like",i).then((function(s){console.log("/app/comment/like response:",s),"like"==t?(e.comment_data.like_list||(e.comment_data.like_list=[]),e.is_like?e.comment_data.like_list.remove(e.$store.state.user.userinfo.uid):(e.comment_data.like_list.push(e.$store.state.user.userinfo.uid),e.comment_data.dislike_list.remove(e.$store.state.user.userinfo.uid))):(e.comment_data.dislike_list||(e.comment_data.dislike_list=[]),e.is_dislike?e.comment_data.dislike_list.remove(e.$store.state.user.userinfo.uid):(e.comment_data.dislike_list.push(e.$store.state.user.userinfo.uid),e.comment_data.like_list.remove(e.$store.state.user.userinfo.uid)),e.$forceUpdate())})).catch((function(t){console.log("error:",t)}))},reply_comment_event:function(){this.$hub.emit("event:reply:comment",this.comment_data),setTimeout((function(){document.querySelector("#reply").scrollIntoView()}),1)}},computed:{is_self:function(){var t=this.$store.state.hasLogin&&this.$store.state.user.userinfo.uid==this.comment_user.uid;return t},comment_user:function(){return this.comment_data.comment_user?this.comment_data.comment_user:this.get_comment_user(this.comment_data.comment_uid)},reply_commnet:function(){if(console.log("call reply_commnet:",this.comment_data.reply_comment_id),this.comment_data.reply_comment_id)return this.get_comment_data(this.comment_data.reply_comment_id)},is_like:function(){if(this.$store.state.hasLogin){var t=this.$store.state.user.userinfo.uid;if(this.comment_data.like_list&&this.comment_data.like_list.indexOf(t)>=0)return!0}return!1},is_dislike:function(){if(this.$store.state.hasLogin){var t=this.$store.state.user.userinfo.uid;if(this.comment_data.dislike_list&&this.comment_data.dislike_list.indexOf(t)>=0)return!0}return!1}}}),p=u,h=s("fe09"),f=s("6544"),y=s.n(f),g=s("132d"),b=Object(l["a"])(p,m,v,!1,null,"26a2dcb8",null),w=b.exports;b.options.components=Object.assign(Object.create(b.options.components||null),b.options.components||{},{QTooltip:h["K"]}),y()(b,{VIcon:g["a"]});var C={mixins:[_],components:{comment_item:w},name:"list",props:{topic_data:{}},data:function(){return{comment_data:{},all_comment_users:{}}},created:function(){var t=this;console.log("create comment list:",this.topic_data),this.load_comment_list({id:this.topic_data.id,start:0,limit:36,cb:this.on_comment_list}),this.listeners["add:comment:list"]=this.$hub.on("event:add:comment",(function(e){console.log("on dd:comment:",e),e.light_css=!0,t.comment_data.comments.push(e)}))},methods:{on_comment_list:function(t,e,s,i){var o=this;console.log("on_comment_list:",t);var a=t.comment_users;this.update_comment_users(a),this.update_comment_datas(s,i,e,t.comments),this.comment_data=t,this.goto_anchor((function(){o.show_assgin_reply()}))},show_assgin_reply:function(){var t=/reply-([a-z0-9]+)/,e=t.exec(location.hash);if(console.log("t_r:",e),t.test(location.hash))e[1]}},destroyed:function(){this.listeners["add:comment:list"]&&this.listeners["add:comment:list"].off()}},k=C,$=Object(l["a"])(k,i,o,!1,null,"58be7094",null);e["a"]=$.exports},"417f":function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.show?s("div",[t.topic_data&&t.topic_data.video_info?s("div",[t.is_ios()?s("div",{staticClass:"ios_player",attrs:{id:"ios_player"}},[s("video",{attrs:{id:"orginal_video_player",preload:"auto",width:"100%",height:"100%",controls:"",crossorigin:"","webkit-playsinline":"",playsinline:"",poster:t.get_cover_image_url(),autoplay:""}},[s("source",{attrs:{src:t.get_m3u8_url(),type:"application/x-mpegURL"}})])]):s("div",{directives:[{name:"show",rawName:"v-show",value:t.player,expression:"player"}]},[s("remote-script",{attrs:{type:"text/javascript",charset:"UTF-8",src:"https://"+t.$web_conf.set_host+"/static/js/lib/hls.js"}}),s("remote-script",{attrs:{type:"text/javascript",charset:"UTF-8",src:"https://"+t.$web_conf.set_host+"/static/plyr/plyr.js"}}),s("remote-script",{attrs:{type:"text/javascript",charset:"UTF-8",src:"https://"+t.$web_conf.set_host+"/static/js/lib/hammer.min.js"}}),s("div",{attrs:{id:"video-player-container"}},[s("video",{attrs:{id:"video-player",preload:"auto","webkit-playsinline":"true",playsinline:"true",controls:"",crossorigin:""}}),s("div",{directives:[{name:"show",rawName:"v-show",value:t.is_show_video_percent,expression:"is_show_video_percent"}],ref:"video_percent"},[s("q-circular-progress",{staticClass:" video_percent",attrs:{"show-value":"","font-size":"12px",value:t.video_percent,size:"50px",thickness:.22,color:"red","track-color":"black"}},[t._v(" "+t._s(t.video_percent)+"% ")])],1),s("div",{directives:[{name:"show",rawName:"v-show",value:t.show_touch_play_progress_flag,expression:"show_touch_play_progress_flag"}],ref:"touch_play_progress",staticClass:"touch-play-progress",attrs:{id:"touch-play-progress"}},[s("span",{staticClass:"touch-play-time"},[t._v(t._s(t.touch_play_time))]),t._v("/"),s("span",{staticClass:"current-play-time"},[t._v(t._s(t.touch_current_play_time))])])])],1)]):t._e(),t.player||t.is_ios()?t._e():s("div",[s("q-skeleton",{attrs:{height:"320px",square:""}})],1),!t.embed&&t.online_video?s("video_tab",{staticClass:"mt-2 mb-2",attrs:{online_video:t.online_video,topic_data:t.topic_data}}):t._e(),!t.embed&&t.online_video&&t.is_jav_video?s("video_jav",{attrs:{topic_data:t.topic_data,online_video:t.online_video}}):t._e(),!t.embed&&t.online_video?s("video_servers",{attrs:{topic_data:t.topic_data,online_video:t.online_video,select_server_name:t.select_server_name},on:{"update:select_server_name":function(e){t.select_server_name=e}}}):t._e()],1):t._e()},o=[],a=(s("c975"),s("b680"),s("d3b7"),s("1bc8")),n=s("717a"),r=s("21d5");s.e("chunk-7722135a").then(s.t.bind(null,"ccd3",7)),s.e("chunk-74917cdf").then(s.t.bind(null,"637d",7));var c={name:"video_watch",components:{video_tab:a["a"],video_jav:n["a"],video_servers:r["a"]},props:{topic_data:void 0,show_title:void 0,embed:void 0},data:function(){return{show:!0,player:void 0,video_ele:void 0,video_percent:void 0,video_status:void 0,online_video:void 0,select_server_name:void 0,show_touch_play_progress_flag:!1,touch_play_time:"",touch_current_play_time:""}},created:function(){this.select_server_name=localStorage.getItem("select_server_name"),this.select_server_name||(this.select_server_name="cdn_xxxhostcf"),console.log("watch_video create"),this.init()},computed:{is_jav_video:function(){var t=this.topic_data.video_info;return 2===t["av_data_type"]},is_show_video_percent:function(){return!(isNaN(this.video_percent)||!this.video_status)&&("playing"!=this.video_status&&"pause"!=this.video_status&&"canplay"!=this.video_status)}},watch:{select_server_name:function(t){console.log("select_server_name change:",t),this.on_switch_server(t)}},methods:{init:function(){this.online_video=this.topic_data.video_info.online_videos[0],this.$nextTick(this.init_video_player),window._t=this},init_video_player:function(){var t=this;if(this.is_ios())this.player=document.querySelector("#orginal_video_player"),this.player.addEventListener("loadeddata",(function(){console.log("on loadeddata")}),!1);else{if(!window.Plyr||!window.Hls)return setTimeout(this.init_video_player,100);(function(t,e){var s=new XMLHttpRequest,i=t.body;s.open("GET",e,!0),s.send(),s.onload=function(){var e=t.createElement("div");e.setAttribute("hidden",""),e.innerHTML=s.responseText,i.insertBefore(e,i.childNodes[0])}})(document,"/static/images/plyr.svg?123");var e="video-player";if(this.video_ele=document.querySelector("#video-player-container video"),!this.video_ele)return setTimeout(this.init_video_player,100);this.player=new window.Plyr("#"+e,{captions:{active:!0,update:!0,language:"en"}});var s=window.Hls,i=s.isSupported();if(i){var o=new s({});o.loadSource(this.get_m3u8_url()),o.attachMedia(this.video_ele),o.on(s.Events.MANIFEST_PARSED,(function(t){console.log("MANIFEST_PARSED e:",t)})),window.hls=o,o.on(s.Events.FRAG_LOAD_PROGRESS,(function(e,s){s.frag;var i=s.stats,o=parseInt(i.loaded/i.total*100);isNaN(o)||(t.video_percent=o)})),o.on(s.Events.FRAG_LOADING,(function(t,e){var s=e.frag;console.log("FRAG_LOADING evnet call:",t,s)})),o.on(s.Events.FRAG_LOADED,(function(t,e){var s=e.frag;console.log("FRAG_LOADED evnet call:",t,s)}));o.p2pEngine;this.video_ele.addEventListener("waiting",(function(e){t.video_status="waiting"}),!0),this.video_ele.addEventListener("seeking",(function(e){t.video_status="seeking",t.video_percent=0}),!0),this.video_ele.addEventListener("canplay",(function(e){t.video_status="canplay"}),!0),this.video_ele.addEventListener("playing",(function(e){t.video_status="playing",t.video_percent=0}),!0),this.video_ele.addEventListener("pause",(function(e){t.video_status="pause",t.video_percent=0}),!0)}var a=this.get_cover_image_url();console.log("cover_image_url:",a),this.player.poster=a,this.add_touch();var n=document.querySelector(".plyr");n.appendChild(this.$refs["touch_play_progress"]),n.appendChild(this.$refs["video_percent"])}},get_cover_image_url:function(){var t=this.generate_cover_url(this.online_video.space_name,this.online_video.hash_id);return console.log("cover_image_url:",t),t},get_m3u8_url:function(){var t="/video/"+this.topic_data.video_info.online_videos[0].hash_id+".m3u8?video_server="+this.select_server_name,e=window.location.host;return e.indexOf("localhost")>=0&&(t="https://"+this.$debug_host+t),t},on_switch_server:function(t){var e=this;this.select_server_name=t,localStorage.setItem("select_server_name",this.select_server_name),this.show=!1,this.$nextTick((function(){e.show=!0,e.init(),e.$nextTick((function(){var t=function(){e.player?e.player.play():setTimeout(e.auto_play,200)};t()})),e.$ga&&e.$ga.event({eventCategory:"on_switch_server",eventAction:"switch",eventLabel:e.select_server_name,eventValue:e.$store.state.hasLogin?"1":"2"})}))},add_touch:function(){var t=this;if(console.log("call add_touch"),!window.Hammer)return setTimeout(this.add_touch,500);function e(t,e){return(t/Math.pow(10,e)).toFixed(e).substr(2)}var s=function(t,s){t=t<0?0:t;var i=Math.floor(t%60),o=Math.floor(t/60%60),a=Math.floor(t/3600),n=Math.floor(s/60%60),r=Math.floor(s/3600);return(isNaN(t)||t===1/0)&&(a=o=i="-"),a=a>0||r>0?a:"0",o=(a||n>=10)&&o<10?"0"+o:o,i=i<10?"0"+i:i,e(a,2)+":"+e(o,2)+":"+e(i,2)},i=s;function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;return i(t,e)}var a=function(e){var s=t.player.duration,i=t.player.currentTime,a=i+e/document.body.clientWidth*420;return a>s&&(a=s),a<0&&(a=0),console.log("[show_touch_play_progress]:",s),t.show_touch_play_progress_flag=!0,t.touch_current_play_time=o(s),t.touch_play_time=o(a),a},n=function(){t.show_touch_play_progress_flag=!1},r=function(){var e=void 0,s=new window.Hammer(document.getElementById("video-player-container"));s.on("pan",(function(t){console.log("pan event:",t),"panright"==t.additionalEvent&&t.deltaX>35&&(e=a(t.deltaX)),"panleft"==t.additionalEvent&&t.deltaX<-35&&(e=a(t.deltaX))})),s.on("panend",(function(s){n(),e&&(t.player.currentTime=e,t.player.play(),e=void 0)})),s.on("pancancel",(function(){n()}))};r()}}},l=c,d=(s("2024"),s("2877")),_=s("fe09"),m=Object(d["a"])(l,i,o,!1,null,"6a2859a8",null);e["a"]=m.exports;m.options.components=Object.assign(Object.create(m.options.components||null),m.options.components||{},{QCircularProgress:_["k"],QSkeleton:_["B"]})},"44b1":function(t,e,s){"use strict";var i=s("abd5"),o=s.n(i);o.a},"49d9":function(t,e,s){},"51dc":function(t,e,s){},5582:function(t,e,s){},6942:function(t,e,s){"use strict";var i=s("51dc"),o=s.n(i);o.a},"6b1e":function(t,e,s){},"706d":function(t,e,s){"use strict";var i=s("80d3"),o=s.n(i);o.a},"717a":function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.video_jav_info?s("div",[s("ul",{staticClass:"works-detail-info-lst"},[t.video_jav_info.video_cast?s("li",{staticClass:"works-detail-info-item js-toggle-target--actress"},[s("dl",{staticClass:"works-detail-info-desc-lst"},[s("dt",{staticClass:"works-detail-info-desc-ttl"},[t._v(t._s(t.$l("actor"))+":")]),s("dd",{staticClass:"works-detail-info-desc-tx"},[s("ul",{staticClass:"works-detail-info-desc-txt-lst"},t._l(t.video_jav_info.video_cast,(function(e){return s("li",{key:e,staticClass:"works-detail-info-desc-txt-item"},[s("router-link",{attrs:{to:"/jav/actress/"+e+"?f=v"}},[t._v(t._s(e))])],1)})),0)])])]):t._e(),t._m(0),t.video_jav_info.video_genres?s("li",{staticClass:"works-detail-info-item"},[s("dl",{staticClass:"works-detail-info-desc-lst"},[s("dt",{staticClass:"works-detail-info-desc-ttl"},[t._v("分类:")]),s("dd",{staticClass:"works-detail-info-desc-tx"},[s("ul",{staticClass:"works-detail-info-desc-txt-lst"},t._l(t.video_jav_info.video_genres,(function(e){return s("li",{staticClass:"works-detail-info-desc-txt-item"},[s("router-link",{attrs:{to:"/jav/genre/"+e}},[t._v(t._s(e))])],1)})),0)])])]):t._e(),s("li",{staticClass:"works-detail-info-item"},[s("dl",{staticClass:"works-detail-info-desc-lst"},[s("dt",{staticClass:"works-detail-info-desc-ttl"},[t._v(t._s(t.$l("view.fanhao"))+":")]),s("dd",{staticClass:"works-detail-info-desc-tx"},[s("ul",{staticClass:"works-detail-info-desc-txt-lst"},[s("li",{staticClass:"works-detail-info-desc-txt-item works-detail-info-desc-txt-item--fix"},[s("span",[t._v(t._s(t.topic_data.video_info.fanhao))])])])])])])])]):t._e()},o=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",{staticClass:"works-detail-info-item none"},[s("dl",{staticClass:"works-detail-info-desc-lst"},[s("dt",{staticClass:"works-detail-info-desc-ttl"},[t._v("发行日期:")]),s("dd",{staticClass:"works-detail-info-desc-tx"},[s("ul",{staticClass:"works-detail-info-desc-txt-lst"},[s("li",{staticClass:"works-detail-info-desc-txt-item"},[s("a",{attrs:{href:"#"}},[t._v("2020年11月7日")])])])])])])}],a={name:"video_jav",props:{online_video:void 0,topic_data:void 0},computed:{video_jav_info:function(){for(var t=["chinese","japanese","english"],e=0;e<t.length;++e){var s=t[e];if(this.topic_data[s])return this.topic_data[s]}}},created:function(){}},n=a,r=(s("f185"),s("2877")),c=Object(r["a"])(n,i,o,!1,null,"f17636c2",null);e["a"]=c.exports},"80d3":function(t,e,s){},"8d30":function(t,e,s){"use strict";var i=s("e855"),o=s.n(i);o.a},abd5:function(t,e,s){},bba2:function(t,e,s){"use strict";var i=s("5582"),o=s.n(i);o.a},c96ad:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.$store.state.hasLogin?s("div",[s("q-img",{staticClass:"rounded-borders",staticStyle:{"min-height":"150px"},attrs:{src:t.cover_image_url,"spinner-color":"white","img-class":"my-custom-image",ratio:16/9,"placeholder-src":"https://"+t.$web_conf.set_host+"/static/images/placeholder-md,jpg"}},[s("div",{staticClass:"vip-container"},[s("h5",{staticClass:"desciption",staticStyle:{"margin-top":"10%"}},[t._v("您已超过每日允许的观看次数。")]),s("h5",{staticClass:"desciption"},[t._v("加入VIP 后即可无限制观看精品视频！")]),s("h5",{staticClass:"desciption"},[t._v("升级成为VIP,可以享受下载视频等特权")]),s("div",{staticClass:"two-button mb10 xxbtn",attrs:{align:"center"}},[s("v-btn",{staticClass:"mt-2",attrs:{color:"primary",depressed:""},on:{click:function(e){return t.go("/buy/vip")}}},[t._v(" "+t._s(t.$l("vip.open_vip"))+" ")])],1)])])],1):s("div",[s("v-responsive",{attrs:{"aspect-ratio":16/9}},[s("q-img",{staticClass:"rounded-borders",attrs:{src:t.cover_image_url,"spinner-color":"white","img-class":"my-custom-image"}},[s("div",{staticClass:"vip-container"},[s("h5",{staticClass:"desciption"},[t._v("注册会员，精彩继续观看")]),s("h5",{staticClass:"desciption"},[t._v("非注册会员，每日限制观看3个视频")]),s("div",{staticClass:"two-button mb10 xxbtn",attrs:{align:"center"}},[s("div",{staticStyle:{padding:"20px"},attrs:{"data-turbolinks-action":"replace"}},[s("a",{staticClass:"btn btn-primary",attrs:{href:"/user/login"}},[t._v("登录")]),t._v(" "),s("a",{staticClass:"btn btn-danger",attrs:{href:"/user/register"}},[t._v("注册")]),t._v("。 ")])])])])],1)],1)},o=[],a={name:"watch_limit",props:{topic_data:void 0},created:function(){this.$ga&&this.$ga.event({eventCategory:"watch_limit",eventAction:"show",eventLabel:"islogin",eventValue:this.$store.state.hasLogin?"1":"2"})},computed:{cover_image_url:function(){var t=this.topic_data.video_info.online_videos[0],e=t.hash_id,s=this.generate_cover_url(t.space_name,e);return console.log("cover_image_url:",s),s}}},n=a,r=(s("6942"),s("2877")),c=s("fe09"),l=s("6544"),d=s.n(l),_=s("8336"),m=s("6b53"),v=Object(r["a"])(n,i,o,!1,null,"314711f6",null);e["a"]=v.exports;v.options.components=Object.assign(Object.create(v.options.components||null),v.options.components||{},{QImg:c["p"]}),d()(v,{VBtn:_["a"],VResponsive:m["a"]})},d5dc:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"comment-reply"},[t.$store.state.hasLogin?s("div",{staticClass:"card-body"},[t.reply_tip&&t.reply_tip.length>0?s("div",{staticClass:"alert alert-success"},[s("button",{staticClass:"close",attrs:{"data-dismiss":"alert"}},[s("span",{attrs:{"aria-hidden":"true"},on:{click:function(e){t.reply_tip=""}}},[t._v("×")])]),t._v(" 回复成功。 ")]):t._e(),s("div",{staticClass:"card-title hide-ios float-lg-left"},[t._v("发起回帖")]),s("div",{staticClass:"editor-toolbar clearfix float-lg-right"},[t.reply_comment_data?s("div",{staticClass:"reply-to pull-right"},[s("i",{staticClass:"fa fa-reply",attrs:{title:"回复"}}),s("a",{staticClass:"user"},[t._v(t._s(t.reply_comment_data.comment_user.username))]),s("a",{staticClass:"close",on:{click:function(e){t.reply_comment_data=void 0}}},[s("i",{staticClass:"fa fa-close"})])]):t._e(),t._m(0)]),s("form",{attrs:{id:"new_reply","accept-charset":"UTF-8",method:"post"}},[s("div",{staticClass:"form-group"},[s("div",{staticClass:"topic-editor-dropzone dz-clickable"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment_data.message,expression:"comment_data.message"}],staticClass:"topic-editor form-control",attrs:{rows:"4",id:"reply_body"},domProps:{value:t.comment_data.message},on:{input:function(e){e.target.composing||t.$set(t.comment_data,"message",e.target.value)}}})]),s("div",{staticClass:"markdown form-control",staticStyle:{display:"none"},attrs:{id:"preview"}})]),s("div",{staticClass:"submit-buttons"},[s("button",{staticClass:"btn btn-primary xyg button",attrs:{type:"button","data-disable-with":"提交回复"},on:{click:t.on_reply}},[t._v("提交回复 ")]),t._m(1)])])]):s("div",[t._m(2)])])},o=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"toolbar-buttons none"},[s("a",{staticClass:"nav-link upload-button",attrs:{id:"editor-upload-image",href:"#",title:"上传图片"}},[s("i",{staticClass:"upload-icon fa fa-image"}),s("i",{staticClass:"loading fa fa-circle-o-notch fa-spin"})]),s("a",{staticClass:"nav-link preview",attrs:{href:"#",title:"预览"}},[s("i",{staticClass:"fa fa-eye"})])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"help-inline none",staticStyle:{"padding-left":"5px"},attrs:{title:"或者 Ctrl + Enter"}},[s("kbd",[t._v("Command")]),t._v(" + "),s("kbd",[t._v("Enter")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card border-0 video-card "},[s("div",{staticClass:"card-body"},[s("div",{staticClass:"form box",attrs:{id:"reply"}},[s("div",{staticStyle:{padding:"20px"},attrs:{"data-turbolinks-action":"replace"}},[t._v(" 需要 "),s("a",{staticClass:"btn btn-primary xyg button",attrs:{href:"/user/login"}},[t._v("登录")]),t._v(" 后方可回复, 如果你还没有账号请点击这里 "),s("a",{staticClass:"btn btn-danger xyg button",attrs:{href:"/user/register"}},[t._v("注册")]),t._v("。 ")])])])])}],a=(s("a4fb"),{name:"reply",props:{topic_data:{}},data:function(){return{comment_data:{reply_id:"",comment_item_id:""},reply_tip:"",reply_comment_data:void 0}},created:function(){var t=this;console.log("this.comment_data:",this.comment_data),this.listeners["reply:comment:reply"]=this.$hub.on("event:reply:comment",(function(e){console.log("on event event:reply:comment",e),t.reply_comment_data=e}))},destroyed:function(){this.listeners["reply:comment:reply"].off()},methods:{on_reply:function(){var t=this;return this.comment_data.vid=this.topic_data.id,this.comment_data.time=(new Date).valueOf()/1e3,console.log("comment_data:",this.comment_data),!this.comment_data.message||this.comment_data.message.length<=1?(this.$message("评论的内容过短，不得少于1个字",{type:"error"}),!1):(this.reply_comment_data&&(this.comment_data.reply_comment_id=this.reply_comment_data["_id"]),this.$axios.post("/app/view/comment",this.comment_data).then((function(e){if(console.log("add new comment:",e),e){var s=Object.assign({},t.comment_data);s.comment_user=t.$store.state.user.userinfo,s.uid=t.$store.state.user.userinfo.uid,s._id=e.data.add_comment["_id"],t.$hub.emit("event:add:comment",s),t.comment_data.message="",t.reply_tip="回复成功"}})).catch((function(e){console.log("error:",e),t.$message("提交评论出错！")})),!1)}}}),n=a,r=(s("44b1"),s("2877")),c=Object(r["a"])(n,i,o,!1,null,"e30170e2",null);e["a"]=c.exports},e113:function(t,e,s){},e855:function(t,e,s){},ecb9:function(t,e,s){"use strict";var i=s("49d9"),o=s.n(i);o.a},f185:function(t,e,s){"use strict";var i=s("6b1e"),o=s.n(i);o.a}}]);
//# sourceMappingURL=chunk-4bee5b8e.dfa98f72.js.map