(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-44599792"],{5388:function(e,r,t){"use strict";t.r(r);var s=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"loginh ActionArea-dti99u-0 fnpDiG"},[t("div",{staticClass:"P-Login"},[t("div",{staticClass:"Panel"},[e._m(0),t("van-form",{on:{submit:e.on_submit}},[t("van-field",{attrs:{name:"用户名/邮箱",label:"用户名/邮箱",placeholder:"用户名/邮箱",rules:[{required:!0,message:"请填写用户名/邮箱"}]},model:{value:e.user.username,callback:function(r){e.$set(e.user,"username",r)},expression:"user.username"}}),t("van-field",{attrs:{type:"password",name:"密码",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"}]},model:{value:e.user.password,callback:function(r){e.$set(e.user,"password",r)},expression:"user.password"}}),t("div",{staticClass:"form-group mt-2"},[t("div",{staticClass:"SubmitField"},[t("v-btn",{staticClass:"xyg w-100",attrs:{loading:e.submit_loading,color:"primary"},on:{click:e.on_submit}},[e._v("登录")])],1)]),t("div",{staticClass:"my-3 text-center"},[e._v("您还不是会员，"),t("span",{staticClass:"text-primary G-CursorPointer"},[t("a",{attrs:{href:"/user/register"}},[e._v("立即注册")])])]),t("div",{staticClass:"my-3 text-center"},[e._v("忘记密码？"),t("span",{staticClass:"text-primary G-CursorPointer"},[e._v("点此找回")])])],1)],1)]),t("div")])},i=[function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"G-Title mb-3 mt-3"},[t("h3",[e._v("用户登录")])])}],n=(t("ac1f"),t("5319"),t("4b13"),{name:"login",data:function(){return{submit_loading:!1,user:{},referrer:""}},created:function(){if(this.$store.state.hasLogin)return this.$router.replace("/");window._t=this,console.log("document.referrer:",document.referrer),console.log("this.$router",this.$router),document.referrer&&(this.referrer=document.referrer)},beforeRouteEnter:function(e,r,t){t((function(e){e.referrer=r.path,console.log("from:",r)}))},methods:{on_submit:function(){var e=this;if(!this.user.username||this.user.username.length<4)return this.$message("用户名过短,不少于4位",{theme:"error",position:"top-left",duration:5e3});if(!this.user.password||this.user.password.length<=6)return this.$message("密码过短，不能少于6位",{theme:"error",position:"top-left",duration:5e3});this.submit_loading=!0;var r=this.user;return r.referrer=this.referrer,this.$axios.post("/app/user/login",r).then((function(r){e.loading=!1;var t=r.data;console.log("response_data:",t);var s=t.user,i=t.token;s&&i&&(e.$message("登录成功，正在跳转",{theme:"normal",position:"top-left",duration:5e3}),e.$store.commit("login",{userinfo:s,token:i}),e.referrer||(e.referrer="/"),console.log("this.referrer:",e.referrer),e.$router.push(e.referrer)),e.submit_loading=!1})).catch((function(r){console.log("error:",r),e.submit_loading=!1})),!1}}}),o=n,a=(t("c47d"),t("2877")),u=t("6544"),l=t.n(u),c=t("8336"),d=Object(a["a"])(o,s,i,!1,null,null,null);r["default"]=d.exports;l()(d,{VBtn:c["a"]})},"5f34":function(e,r,t){},c47d:function(e,r,t){"use strict";var s=t("5f34"),i=t.n(s);i.a}}]);
//# sourceMappingURL=chunk-44599792.be7fcc68.js.map