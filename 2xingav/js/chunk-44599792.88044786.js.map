{"version":3,"sources":["webpack:///./src/components/user/login.vue?3c3d","webpack:///./src/components/user/login.vue","webpack:///./src/components/user/login.vue?569f","webpack:///./src/components/user/login.vue?263e","webpack:///./src/components/user/login.vue?99ef"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_m","on","on_submit","attrs","required","message","model","value","user","callback","$$v","$set","expression","submit_loading","_v","staticRenderFns","name","data","referrer","created","$store","state","hasLogin","$router","replace","window","_t","console","log","document","beforeRouteEnter","to","from","next","vm","path","methods","username","length","$message","theme","position","duration","password","post_data","$axios","post","then","response","loading","response_data","userinfo","token","commit","push","catch","error","component","VBtn"],"mappings":"uHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,qCAAqC,CAACF,EAAG,MAAM,CAACE,YAAY,WAAW,CAACF,EAAG,MAAM,CAACE,YAAY,SAAS,CAACN,EAAIO,GAAG,GAAGH,EAAG,WAAW,CAACI,GAAG,CAAC,OAASR,EAAIS,YAAY,CAACL,EAAG,YAAY,CAACM,MAAM,CAAC,KAAO,SAAS,MAAQ,SAAS,YAAc,SAAS,MAAQ,CAAC,CAAEC,UAAU,EAAMC,QAAS,eAAgBC,MAAM,CAACC,MAAOd,EAAIe,KAAa,SAAEC,SAAS,SAAUC,GAAMjB,EAAIkB,KAAKlB,EAAIe,KAAM,WAAYE,IAAME,WAAW,mBAAmBf,EAAG,YAAY,CAACM,MAAM,CAAC,KAAO,WAAW,KAAO,KAAK,MAAQ,KAAK,YAAc,KAAK,MAAQ,CAAC,CAAEC,UAAU,EAAMC,QAAS,WAAYC,MAAM,CAACC,MAAOd,EAAIe,KAAa,SAAEC,SAAS,SAAUC,GAAMjB,EAAIkB,KAAKlB,EAAIe,KAAM,WAAYE,IAAME,WAAW,mBAAmBf,EAAG,MAAM,CAACE,YAAY,mBAAmB,CAACF,EAAG,MAAM,CAACE,YAAY,eAAe,CAACF,EAAG,QAAQ,CAACE,YAAY,YAAYI,MAAM,CAAC,QAAUV,EAAIoB,eAAe,MAAQ,WAAWZ,GAAG,CAAC,MAAQR,EAAIS,YAAY,CAACT,EAAIqB,GAAG,SAAS,KAAKjB,EAAG,MAAM,CAACE,YAAY,oBAAoB,CAACN,EAAIqB,GAAG,WAAWjB,EAAG,OAAO,CAACE,YAAY,gCAAgC,CAACF,EAAG,IAAI,CAACM,MAAM,CAAC,KAAO,mBAAmB,CAACV,EAAIqB,GAAG,cAAcjB,EAAG,MAAM,CAACE,YAAY,oBAAoB,CAACN,EAAIqB,GAAG,SAASjB,EAAG,OAAO,CAACE,YAAY,gCAAgC,CAACN,EAAIqB,GAAG,aAAa,IAAI,KAAKjB,EAAG,UACvzCkB,EAAkB,CAAC,WAAa,IAAItB,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,qBAAqB,CAACF,EAAG,KAAK,CAACJ,EAAIqB,GAAG,cCmDvJ,G,8BAAA,CACbE,KAAM,QACNC,KAFa,WAGX,MAAO,CACLJ,gBAAgB,EAChBL,KAAM,GACNU,SAAU,KAGdC,QATa,WAUX,GAAIzB,KAAK0B,OAAOC,MAAMC,SACpB,OAAO5B,KAAK6B,QAAQC,QAAQ,KAE9BC,OAAOC,GAAKhC,KACZiC,QAAQC,IAAI,qBAAsBC,SAASX,UAC3CS,QAAQC,IAAI,eAAgBlC,KAAK6B,SAC7BM,SAASX,WACXxB,KAAKwB,SAAWW,SAASX,WAG7BY,iBApBa,SAoBIC,EAAIC,EAAMC,GACzBA,GAAK,SAAAC,GACHA,EAAGhB,SAAWc,EAAKG,KACnBR,QAAQC,IAAI,QAASI,OAGzBI,QAAS,CACPlC,UAAW,WAAY,WAErB,IAAKR,KAAKc,KAAK6B,UAAY3C,KAAKc,KAAK6B,SAASC,OAAS,EACrD,OAAO5C,KAAK6C,SAAS,cAAe,CAClCC,MAAO,QACPC,SAAU,WACVC,SAAU,MAId,IAAKhD,KAAKc,KAAKmC,UAAYjD,KAAKc,KAAKmC,SAASL,QAAU,EACtD,OAAO5C,KAAK6C,SAAS,cAAe,CAClCC,MAAO,QACPC,SAAU,WACVC,SAAU,MAIdhD,KAAKmB,gBAAiB,EACtB,IAAI+B,EAAYlD,KAAKc,KAmCrB,OAlCAoC,EAAU1B,SAAWxB,KAAKwB,SAE1BxB,KAAKmD,OAAOC,KAAK,kBAAmBF,GAAWG,MAAK,SAACC,GACnD,EAAKC,SAAU,EACf,IAAIC,EAAgBF,EAAS/B,KAC7BU,QAAQC,IAAI,iBAAkBsB,GAE9B,IAAIC,EAAWD,EAAc1C,KACzB4C,EAAQF,EAAcE,MAEtBD,GAAYC,IACd,EAAKb,SAAS,YAAa,CACzBC,MAAO,SACPC,SAAU,WACVC,SAAU,MAGZ,EAAKtB,OAAOiC,OAAO,QAAS,CAC1B,SAAYF,EACZ,MAASC,IAEN,EAAKlC,WACR,EAAKA,SAAW,KAElBS,QAAQC,IAAI,iBAAkB,EAAKV,UACnC,EAAKK,QAAQ+B,KAAK,EAAKpC,WAEzB,EAAKL,gBAAiB,KAErB0C,OAAM,SAACC,GACR7B,QAAQC,IAAI,SAAU4B,GACtB,EAAK3C,gBAAiB,MAGjB,MCrI6Z,I,yDCQta4C,EAAY,eACd,EACAjE,EACAuB,GACA,EACA,KACA,KACA,MAIa,aAAA0C,EAAiB,QAKhC,IAAkBA,EAAW,CAACC,OAAA,Q,2DCxB9B,yBAA0iB,EAAG","file":"js/chunk-44599792.88044786.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"loginh ActionArea-dti99u-0 fnpDiG\"},[_c('div',{staticClass:\"P-Login\"},[_c('div',{staticClass:\"Panel\"},[_vm._m(0),_c('van-form',{on:{\"submit\":_vm.on_submit}},[_c('van-field',{attrs:{\"name\":\"用户名/邮箱\",\"label\":\"用户名/邮箱\",\"placeholder\":\"用户名/邮箱\",\"rules\":[{ required: true, message: '请填写用户名/邮箱' }]},model:{value:(_vm.user.username),callback:function ($$v) {_vm.$set(_vm.user, \"username\", $$v)},expression:\"user.username\"}}),_c('van-field',{attrs:{\"type\":\"password\",\"name\":\"密码\",\"label\":\"密码\",\"placeholder\":\"密码\",\"rules\":[{ required: true, message: '请填写密码' }]},model:{value:(_vm.user.password),callback:function ($$v) {_vm.$set(_vm.user, \"password\", $$v)},expression:\"user.password\"}}),_c('div',{staticClass:\"form-group mt-2\"},[_c('div',{staticClass:\"SubmitField\"},[_c('v-btn',{staticClass:\"xyg w-100\",attrs:{\"loading\":_vm.submit_loading,\"color\":\"primary\"},on:{\"click\":_vm.on_submit}},[_vm._v(\"登录\")])],1)]),_c('div',{staticClass:\"my-3 text-center\"},[_vm._v(\"您还不是会员，\"),_c('span',{staticClass:\"text-primary G-CursorPointer\"},[_c('a',{attrs:{\"href\":\"/user/register\"}},[_vm._v(\"立即注册\")])])]),_c('div',{staticClass:\"my-3 text-center\"},[_vm._v(\"忘记密码？\"),_c('span',{staticClass:\"text-primary G-CursorPointer\"},[_vm._v(\"点此找回\")])])],1)],1)]),_c('div')])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"G-Title mb-3 mt-3\"},[_c('h3',[_vm._v(\"用户登录\")])])}]\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nimport '../../assets/css/user.css'\n\nexport default {\n  name: 'login',\n  data() {\n    return {\n      submit_loading: false,\n      user: {},\n      referrer: ''\n    }\n  },\n  created() {\n    if (this.$store.state.hasLogin) {\n      return this.$router.replace('/');\n    }\n    window._t = this;\n    console.log('document.referrer:', document.referrer);\n    console.log('this.$router', this.$router);\n    if (document.referrer) {\n      this.referrer = document.referrer;\n    }\n  },\n  beforeRouteEnter(to, from, next) {\n    next(vm => {\n      vm.referrer = from.path\n      console.log(\"from:\", from);\n    })\n  },\n  methods: {\n    on_submit: function () {\n\n      if (!this.user.username || this.user.username.length < 4) {\n        return this.$message('用户名过短,不少于4位', {\n          theme: \"error\",\n          position: \"top-left\",\n          duration: 5000\n        });\n      }\n\n      if (!this.user.password || this.user.password.length <= 6) {\n        return this.$message('密码过短，不能少于6位', {\n          theme: \"error\",\n          position: \"top-left\",\n          duration: 5000\n        });\n      }\n\n      this.submit_loading = true;\n      var post_data = this.user\n      post_data.referrer = this.referrer;\n\n      this.$axios.post('/app/user/login', post_data).then((response) => {\n        this.loading = false;\n        var response_data = response.data;\n        console.log(\"response_data:\", response_data)\n\n        var userinfo = response_data.user;\n        var token = response_data.token;\n\n        if (userinfo && token) {\n          this.$message('登录成功，正在跳转', {\n            theme: \"normal\",\n            position: \"top-left\",\n            duration: 5000\n          });\n\n          this.$store.commit('login', {\n            'userinfo': userinfo,\n            'token': token\n          });\n          if (!this.referrer) {\n            this.referrer = '/'\n          }\n          console.log('this.referrer:', this.referrer);\n          this.$router.push(this.referrer);\n        }\n        this.submit_loading = false;\n\n      }).catch((error) => {\n        console.log('error:', error);\n        this.submit_loading = false;\n\n      });\n      return false;\n    }\n  }\n\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../../node_modules/cache-loader/dist/cjs.js??ref--0-1!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../../node_modules/cache-loader/dist/cjs.js??ref--0-1!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./login.vue?vue&type=template&id=570093e3&\"\nimport script from \"./login.vue?vue&type=script&lang=js&\"\nexport * from \"./login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./login.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\ninstallComponents(component, {VBtn})\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../../node_modules/cache-loader/dist/cjs.js??ref--0-1!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../../node_modules/cache-loader/dist/cjs.js??ref--0-1!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}