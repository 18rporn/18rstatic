{"version":3,"sources":["webpack:///./src/components/user/login.vue?4788","webpack:///./src/components/user/login.vue","webpack:///./src/components/user/login.vue?569f","webpack:///./src/components/user/login.vue?263e"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","class","user","username","length","_v","directives","name","rawName","value","expression","attrs","domProps","on","$event","target","composing","$set","password","_m","submit_loading","on_submit","_s","$l","staticRenderFns","data","referrer","created","$store","state","hasLogin","$router","replace","window","_t","document","beforeRouteEnter","to","from","next","vm","path","methods","$message","theme","position","duration","post_data","$axios","post","then","response","loading","response_data","userinfo","token","commit","push","catch","error","component"],"mappings":"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","file":"js/chunk-2d0c7f14.2518a9cb.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"loginh\"},[_c('div',{staticClass:\"universal contentBox\"},[_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"form\"},[_c('form',[_c('div',{staticClass:\"username\"},[_c('div',{staticClass:\"inputBox\"},[_c('span',{staticClass:\"inputBoxTips\",class:{ 'none': _vm.user.username && _vm.user.username.length > 0 }},[_vm._v(\"用户名/邮箱\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.user.username),expression:\"user.username\"}],attrs:{\"type\":\"username\",\"autocomplete\":\"new-password\",\"value\":\"\"},domProps:{\"value\":(_vm.user.username)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.user, \"username\", $event.target.value)}}})])]),_c('div',{staticClass:\"password\"},[_c('div',{staticClass:\"inputBox\"},[_c('span',{staticClass:\"inputBoxTips\",class:{ 'none': _vm.user.password && _vm.user.password.length > 0 }},[_vm._v(\"请输入密码\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.user.password),expression:\"user.password\"}],attrs:{\"type\":\"password\",\"autocomplete\":\"new-password\",\"value\":\"\"},domProps:{\"value\":(_vm.user.password)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.user, \"password\", $event.target.value)}}})])]),_vm._m(0),_c('div',{staticClass:\"submit xxbtn\"},[_c('a',{staticClass:\"btn btn-primary full-width\",attrs:{\"disabled\":_vm.submit_loading},on:{\"click\":_vm.on_submit}},[_vm._v(_vm._s(_vm.$l('login')))])]),_vm._m(1)])])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_c('input',{attrs:{\"type\":\"checkbox\",\"checked\":\"checked\"}}),_c('label',[_vm._v(\"记住我\")]),_c('a',{staticClass:\"fr\",attrs:{\"href\":\"/\"}},[_vm._v(\"忘记密码？\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\" 还没有账号？ \"),_c('a',{attrs:{\"href\":\"/user/register\"}},[_vm._v(\"立即注册\")])])}]\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nimport '../../assets/css/user.css'\n\nexport default {\n  name: 'login',\n  data() {\n    return {\n      submit_loading: false,\n      user: {},\n      referrer: ''\n    }\n  },\n  created() {\n    if (this.$store.state.hasLogin) {\n      return this.$router.replace('/');\n    }\n    window._t = this;\n    console.log('document.referrer:', document.referrer);\n    console.log('this.$router', this.$router);\n    if (document.referrer) {\n      this.referrer = document.referrer;\n    }\n  },\n  beforeRouteEnter(to, from, next) {\n    next(vm => {\n      vm.referrer = from.path\n      console.log(\"from:\", from);\n    })\n  },\n  methods: {\n    on_submit: function () {\n\n      if (!this.user.username || this.user.username.length < 4) {\n        return this.$message('用户名过短,不少于4位', {\n          theme: \"error\",\n          position: \"top-left\",\n          duration: 5000\n        });\n      }\n\n      if (!this.user.password || this.user.password.length <= 6) {\n        return this.$message('密码过短，不能少于6位', {\n          theme: \"error\",\n          position: \"top-left\",\n          duration: 5000\n        });\n      }\n\n      this.submit_loading = true;\n      var post_data = this.user\n      post_data.referrer = this.referrer;\n\n      this.$axios.post('/app/user/login', post_data).then((response) => {\n        this.loading = false;\n        var response_data = response.data;\n        console.log(\"response_data:\", response_data)\n\n        var userinfo = response_data.user;\n        var token = response_data.token;\n        this.$message('登录成功，正在跳转', {\n          theme: \"normal\",\n          position: \"top-left\",\n          duration: 5000\n        });\n\n        this.$store.commit('login', {\n          'userinfo': userinfo,\n          'token': token\n        });\n        if (!this.referrer) {\n          this.referrer = '/'\n        }\n        console.log('this.referrer:', this.referrer);\n        this.$router.push(this.referrer);\n      }).catch((error) => {\n        console.log('error:', error);\n        this.submit_loading = false;\n\n      });\n      return false;\n    }\n  }\n\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../../node_modules/cache-loader/dist/cjs.js??ref--0-1!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../../node_modules/cache-loader/dist/cjs.js??ref--0-1!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./login.vue?vue&type=template&id=a68293d4&\"\nimport script from \"./login.vue?vue&type=script&lang=js&\"\nexport * from \"./login.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}