(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c7f14"],{5388:function(t,e,r){"use strict";r.r(e);var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"row"},[r("div",{staticClass:"col"}),r("div",{staticClass:"col-md-5"},[r("div",{staticClass:"card card-l6"},[r("div",{staticClass:"card-body"},[r("div",{staticClass:"card-title"},[t._v("登录 "+t._s(t.$web_conf.application_name))]),r("form",{staticClass:"new_user",attrs:{id:"new_user",action:"/account/sign_in","accept-charset":"UTF-8",method:"post"}},[r("div",{staticClass:"form-group"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.user.username,expression:"user.username"}],staticClass:"form-control form-control-lg",attrs:{placeholder:"用户名 / Email",type:"text",name:"user[login]",id:"user_login"},domProps:{value:t.user.username},on:{input:function(e){e.target.composing||t.$set(t.user,"username",e.target.value)}}})]),r("div",{staticClass:"form-group"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-control form-control-lg",attrs:{type:"password",placeholder:"密码",name:"user[password]",id:"user_password"},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}})]),t._m(0),r("div",{staticClass:"form-actions"},[r("input",{staticClass:"btn btn-primary btn-lg btn-block",attrs:{disabled:t.submit_loading,type:"submit",name:"commit",value:"登录"},on:{click:t.on_submit}})])])])]),t._e()]),t._m(2),r("div",{staticClass:"col"})])},a=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"form-group"},[r("div",{staticClass:"custom-control custom-checkbox"},[r("input",{attrs:{name:"user[remember_me]",type:"hidden",value:"0"}}),r("input",{staticClass:"custom-control-input",attrs:{type:"checkbox",value:"1",name:"user[remember_me]",id:"user_remember_me"}}),r("label",{staticClass:"custom-control-label",attrs:{for:"user_remember_me"}},[t._v("记住登录状态")])])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"card-body flex aic jcc"},[r("a",{staticClass:"btn btn-default omniauth-github",attrs:{rel:"nofollow","data-method":"post",href:"/account/auth/github"}},[r("i",{staticClass:"fab fa-github"}),t._v(" GitHub")]),r("a",{staticClass:"btn btn-default omniauth-twitter",attrs:{rel:"nofollow","data-method":"post",href:"/account/auth/twitter"}},[r("i",{staticClass:"fab fa-twitter"}),t._v(" Twitter")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"col-md-3"},[r("div",{staticClass:"card"},[r("ul",{staticClass:"list-group list-group-flush"},[r("li",{staticClass:"list-group-item"},[r("a",{attrs:{href:"/account/register"}},[t._v("注册")])]),r("li",{staticClass:"list-group-item"},[r("a",{attrs:{href:"/account/forgot"}},[t._v("忘记了密码?")])])])])])}],o=(r("ac1f"),r("5319"),r("4b13"),{name:"login",data:function(){return{submit_loading:!1,user:{},referrer:""}},created:function(){if(this.$store.state.hasLogin)return this.$router.replace("/");window._t=this,console.log("document.referrer:",document.referrer),console.log("this.$router",this.$router),document.referrer&&(this.referrer=document.referrer)},beforeRouteEnter:function(t,e,r){r((function(t){t.referrer=e.path,console.log("from:",e)}))},methods:{on_submit:function(){var t=this;if(!this.user.username||this.user.username.length<4)return this.$message("用户名过短,不少于4位",{theme:"error",position:"top-left",duration:5e3});if(!this.user.password||this.user.password.length<=6)return this.$message("密码过短，不能少于6位",{theme:"error",position:"top-left",duration:5e3});this.submit_loading=!0;var e=this.user;return e.referrer=this.referrer,this.$axios.post("/app/user/login",e).then((function(e){t.loading=!1;var r=e.data;console.log("response_data:",r);var s=r.user,a=r.token;t.$message("登录成功，正在跳转",{theme:"normal",position:"top-left",duration:5e3}),t.$store.commit("login",{userinfo:s,token:a}),t.referrer||(t.referrer="/"),console.log("this.referrer:",t.referrer),t.$router.push(t.referrer)})).catch((function(e){console.log("error:",e),t.submit_loading=!1})),!1}}}),i=o,n=r("2877"),l=Object(n["a"])(i,s,a,!1,null,null,null);e["default"]=l.exports}}]);
//# sourceMappingURL=chunk-2d0c7f14.9993bd0b.js.map